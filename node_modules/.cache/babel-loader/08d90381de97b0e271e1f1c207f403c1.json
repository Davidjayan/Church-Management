{"ast":null,"code":"import _toConsumableArray from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{url}from'../Constants';import{Button,Grid,MenuItem,Select,TextField,Typography}from'@mui/material';import{CAlert,CFormSelect,CFormText,CTable,CTableBody,CTableDataCell,CTableHead,CTableHeaderCell,CTableRow}from'@coreui/react';import{AlertMessage}from'./Support/AlertMessage';import{DataEntryForms}from'./DataEntryForm';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var EditData=function EditData(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setdata=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),pageno=_useState4[0],setPageno=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),pages=_useState6[0],setPages=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),editdata=_useState8[0],seteditdata=_useState8[1];var items=10;var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),familyheads=_useState10[0],setFamilyheads=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),addresses=_useState12[0],setAddresses=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),validated=_useState14[0],setValidated=_useState14[1];var handleSubmit=function handleSubmit(event){var form=event.currentTarget;if(form.checkValidity()==false){// event.preventDefault()\nevent.stopPropagation();}else{setValidated(true);}};useEffect(function(){fetch(\"\".concat(url,\"/member-data-count.php\"),{method:'GET',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){if(result['status']==1){var pagecount=parseInt(parseInt(result['message'])/items);var pageList=[];for(var i=0;i<=pagecount;i++){pageList.push(i);}setPages(pageList);pageList=[];}});},[]);useEffect(function(){fetch(\"\".concat(url,\"/data-fetch.php?page_no=\").concat(pageno,\"&items=\").concat(items),{method:'GET',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){if(result['status']==1){var mess=result['message'];for(var i=0;i<mess.length;i++){mess[i].InitialSID=mess[i]['SelfID'];}console.log(mess);setdata(mess);}else{setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,severity:result['status']==1?\"success\":\"error\",message:String(result['message'])}));}}).catch(function(error){console.log(error);});},[pageno,validated]);useEffect(function(){searchfamilyhead();makechanges();},[validated]);var searchfamilyhead=function searchfamilyhead(){fetch(\"\".concat(url,\"/searchfamilyhead.php\"),{headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){var filteredresult=_toConsumableArray(new Set(result));setFamilyheads(filteredresult);}).catch(function(error){console.error(error);});};var searchaddress=function searchaddress(){fetch(\"\".concat(url,\"/searchaddress.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){var filteredresult=_toConsumableArray(new Set(result));setAddresses(filteredresult);}).catch(function(error){console.error(error);});};var _useState15=useState({isOpen:false,message:'',variant:'filled',severity:'error'}),_useState16=_slicedToArray(_useState15,2),notify=_useState16[0],setNotify=_useState16[1];var makechanges=function makechanges(){if(editdata!==undefined){fetch(\"\".concat(url,\"/data-edit.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({data:editdata})}).then(function(res){return res.json();}).then(function(result){setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,severity:result['status']==1?'success':'error',message:result['message']}));setValidated(false);}).catch(function(error){console.log(error);});}};var deleteRecord=function deleteRecord(){fetch(\"\".concat(url,\"/data-delete.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({selfid:editdata['SelfID']})}).then(function(res){return res.json();}).then(function(result){setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:result}));window.location.reload();}).catch(function(error){console.log(error);});};var Typograph=function Typograph(props){return/*#__PURE__*/_jsxs(\"p\",{className:\"lead\",children:[\" \",props.children,\" \"]});};var _useState17=useState(\"id\"),_useState18=_slicedToArray(_useState17,2),searchby=_useState18[0],setsearchby=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),value=_useState20[0],setvalue=_useState20[1];return/*#__PURE__*/_jsxs(Grid,{className:\"editform\",children:[editdata!=undefined?/*#__PURE__*/_jsx(DataEntryForms,{familyheads:familyheads,data:editdata,notify:notify,setNotify:setNotify,setData:seteditdata,validated:validated,handleSubmit:handleSubmit})// console.log(editdata)\n:'',/*#__PURE__*/_jsx(Grid,{direction:\"column\",item:true,children:/*#__PURE__*/_jsx(Select,{placeholder:\"Pageno\",defaultValue:pageno,onChange:function onChange(e){setPageno(e.target.value);},children:pages.map(function(val,index){return/*#__PURE__*/_jsx(MenuItem,{value:val,children:val},index);})})}),/*#__PURE__*/_jsxs(CTable,{children:[/*#__PURE__*/_jsxs(CTableHead,{children:[/*#__PURE__*/_jsx(CTableHeaderCell,{children:\"SELF ID\"}),/*#__PURE__*/_jsx(CTableHeaderCell,{children:\"Name\"}),/*#__PURE__*/_jsx(CTableHeaderCell,{children:\"Family head\"})]}),/*#__PURE__*/_jsx(CTableBody,{children:data.map(function(k,index){return/*#__PURE__*/_jsxs(CTableRow,{children:[/*#__PURE__*/_jsx(CTableDataCell,{children:k.SelfID}),/*#__PURE__*/_jsx(CTableDataCell,{children:k.Name}),/*#__PURE__*/_jsx(CTableDataCell,{children:k.FamilyHead}),/*#__PURE__*/_jsx(CTableDataCell,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){seteditdata(data[index]);},children:\"Edit\"})})]},index);})})]})]});};export default EditData;","map":{"version":3,"sources":["/home/david/Desktop/mydev/Church-Management/src/views/Components/EditData.js"],"names":["React","useEffect","useState","url","Button","Grid","MenuItem","Select","TextField","Typography","CAlert","CFormSelect","CFormText","CTable","CTableBody","CTableDataCell","CTableHead","CTableHeaderCell","CTableRow","AlertMessage","DataEntryForms","EditData","data","setdata","pageno","setPageno","pages","setPages","editdata","seteditdata","items","familyheads","setFamilyheads","addresses","setAddresses","validated","setValidated","handleSubmit","event","form","currentTarget","checkValidity","stopPropagation","fetch","method","headers","then","res","json","result","pagecount","parseInt","pageList","i","push","mess","length","InitialSID","console","log","setNotify","notify","isOpen","severity","message","String","catch","error","searchfamilyhead","makechanges","filteredresult","Set","searchaddress","variant","undefined","body","JSON","stringify","deleteRecord","selfid","window","location","reload","Typograph","props","children","searchby","setsearchby","value","setvalue","e","target","map","val","index","k","SelfID","Name","FamilyHead"],"mappings":"6eAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,GAAT,KAAoB,cAApB,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,QAAvB,CAAiCC,MAAjC,CAAyCC,SAAzC,CAAoDC,UAApD,KAAsE,eAAtE,CACA,OAASC,MAAT,CAAiBC,WAAjB,CAA8BC,SAA9B,CAAyCC,MAAzC,CAAiDC,UAAjD,CAA6DC,cAA7D,CAA6EC,UAA7E,CAAyFC,gBAAzF,CAA2GC,SAA3G,KAA4H,eAA5H,CACA,OAASC,YAAT,KAA6B,wBAA7B,CACA,OAASC,cAAT,KAA+B,iBAA/B,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnB,cAAwBnB,QAAQ,CAAC,EAAD,CAAhC,wCAAOoB,IAAP,eAAaC,OAAb,eACA,eAA4BrB,QAAQ,CAAC,CAAD,CAApC,yCAAOsB,MAAP,eAAeC,SAAf,eACA,eAA0BvB,QAAQ,CAAC,EAAD,CAAlC,yCAAOwB,KAAP,eAAcC,QAAd,eACA,eAAgCzB,QAAQ,EAAxC,yCAAO0B,QAAP,eAAiBC,WAAjB,eACA,GAAMC,CAAAA,KAAK,CAAG,EAAd,CACA,eAAsC5B,QAAQ,CAAC,EAAD,CAA9C,0CAAO6B,WAAP,gBAAoBC,cAApB,gBACA,gBAAkC9B,QAAQ,CAAC,EAAD,CAA1C,2CAAO+B,SAAP,gBAAkBC,YAAlB,gBAIA,gBAAkChC,QAAQ,CAAC,KAAD,CAA1C,2CAAOiC,SAAP,gBAAkBC,YAAlB,gBAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC5B,GAAMC,CAAAA,IAAI,CAAGD,KAAK,CAACE,aAAnB,CAEA,GAAID,IAAI,CAACE,aAAL,IAAwB,KAA5B,CAAmC,CAC/B;AAEAH,KAAK,CAACI,eAAN,GAEH,CALD,IAMK,CACDN,YAAY,CAAC,IAAD,CAAZ,CACH,CACJ,CAZD,CAcAnC,SAAS,CAAC,UAAM,CACZ0C,KAAK,WAAIxC,GAAJ,2BAAiC,CAClCyC,MAAM,CAAE,KAD0B,CAElCC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFyB,CAAjC,CAAL,CAOKC,IAPL,CAOU,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EAPV,EAQKF,IARL,CAQU,SAACG,MAAD,CAAY,CACd,GAAIA,MAAM,CAAC,QAAD,CAAN,EAAoB,CAAxB,CAA2B,CACvB,GAAIC,CAAAA,SAAS,CAAGC,QAAQ,CAACA,QAAQ,CAACF,MAAM,CAAC,SAAD,CAAP,CAAR,CAA8BnB,KAA/B,CAAxB,CACA,GAAIsB,CAAAA,QAAQ,CAAG,EAAf,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,EAAIH,SAArB,CAAgCG,CAAC,EAAjC,CAAqC,CACjCD,QAAQ,CAACE,IAAT,CAAcD,CAAd,EACH,CACD1B,QAAQ,CAACyB,QAAD,CAAR,CACAA,QAAQ,CAAG,EAAX,CACH,CACJ,CAlBL,EAmBH,CApBQ,CAoBN,EApBM,CAAT,CAsBAnD,SAAS,CAAC,UAAM,CACZ0C,KAAK,WAAIxC,GAAJ,oCAAkCqB,MAAlC,mBAAkDM,KAAlD,EAA2D,CAC5Dc,MAAM,CAAE,KADoD,CAE5DC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFmD,CAA3D,CAAL,CAOGC,IAPH,CAOQ,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EAPR,EAQKF,IARL,CAQU,SAACG,MAAD,CAAY,CACd,GAAIA,MAAM,CAAC,QAAD,CAAN,EAAoB,CAAxB,CAA2B,CACvB,GAAIM,CAAAA,IAAI,CAAGN,MAAM,CAAC,SAAD,CAAjB,CACA,IAAK,GAAII,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGE,IAAI,CAACC,MAAzB,CAAiCH,CAAC,EAAlC,CAAsC,CACnCE,IAAI,CAACF,CAAD,CAAJ,CAAQI,UAAR,CAAqBF,IAAI,CAACF,CAAD,CAAJ,CAAQ,QAAR,CAArB,CACF,CACDK,OAAO,CAACC,GAAR,CAAYJ,IAAZ,EACAhC,OAAO,CAACgC,IAAD,CAAP,CACH,CAPD,IAQK,CACDK,SAAS,gCACFC,MADE,MAELC,MAAM,CAAE,IAFH,CAGLC,QAAQ,CAAEd,MAAM,CAAC,QAAD,CAAN,EAAoB,CAApB,CAAwB,SAAxB,CAAoC,OAHzC,CAILe,OAAO,CAAEC,MAAM,CAAChB,MAAM,CAAC,SAAD,CAAP,CAJV,GAAT,CAMH,CACJ,CAzBL,EA0BKiB,KA1BL,CA0BW,SAACC,KAAD,CAAW,CACdT,OAAO,CAACC,GAAR,CAAYQ,KAAZ,EACH,CA5BL,EA6BH,CA9BQ,CA8BN,CAAC3C,MAAD,CAAQW,SAAR,CA9BM,CAAT,CAiCAlC,SAAS,CAAC,UAAI,CACVmE,gBAAgB,GAChBC,WAAW,GACd,CAHQ,CAGP,CAAClC,SAAD,CAHO,CAAT,CAOA,GAAMiC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC3BzB,KAAK,WAAIxC,GAAJ,0BAAgC,CACjC0C,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CADwB,CAAhC,CAAL,CAOKC,IAPL,CAOU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAPb,EAQKF,IARL,CAQU,SAACG,MAAD,CAAY,CACd,GAAIqB,CAAAA,cAAc,oBAAO,GAAIC,CAAAA,GAAJ,CAAQtB,MAAR,CAAP,CAAlB,CACAjB,cAAc,CAACsC,cAAD,CAAd,CACH,CAXL,EAWOJ,KAXP,CAWa,SAACC,KAAD,CAAW,CAChBT,OAAO,CAACS,KAAR,CAAcA,KAAd,EACH,CAbL,EAcH,CAfD,CAgBA,GAAMK,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxB7B,KAAK,WAAIxC,GAAJ,uBAA6B,CAC9ByC,MAAM,CAAE,MADsB,CAE9BC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFqB,CAA7B,CAAL,CAQKC,IARL,CAQU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EARb,EASKF,IATL,CASU,SAACG,MAAD,CAAY,CACd,GAAIqB,CAAAA,cAAc,oBAAO,GAAIC,CAAAA,GAAJ,CAAQtB,MAAR,CAAP,CAAlB,CACAf,YAAY,CAACoC,cAAD,CAAZ,CACH,CAZL,EAYOJ,KAZP,CAYa,SAACC,KAAD,CAAW,CAChBT,OAAO,CAACS,KAAR,CAAcA,KAAd,EACH,CAdL,EAeH,CAhBD,CAiBA,gBAA4BjE,QAAQ,CAAC,CAAE4D,MAAM,CAAE,KAAV,CAAiBE,OAAO,CAAE,EAA1B,CAA8BS,OAAO,CAAE,QAAvC,CAAiDV,QAAQ,CAAE,OAA3D,CAAD,CAApC,2CAAOF,MAAP,gBAAeD,SAAf,gBAEA,GAAMS,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAGzC,QAAQ,GAAG8C,SAAd,CAAwB,CACpB/B,KAAK,WAAIxC,GAAJ,mBAAyB,CAC1ByC,MAAM,CAAE,MADkB,CAE1BC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFiB,CAM1B8B,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBvD,IAAI,CAAEM,QADW,CAAf,CANoB,CAAzB,CAAL,CAUGkB,IAVH,CAUQ,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EAVR,EAWKF,IAXL,CAWU,SAACG,MAAD,CAAY,CACdW,SAAS,gCACFC,MADE,MAELC,MAAM,CAAE,IAFH,CAGLC,QAAQ,CAACd,MAAM,CAAC,QAAD,CAAN,EAAkB,CAAlB,CAAoB,SAApB,CAA8B,OAHlC,CAILe,OAAO,CAAEf,MAAM,CAAC,SAAD,CAJV,GAAT,CAMAb,YAAY,CAAC,KAAD,CAAZ,CACH,CAnBL,EAoBK8B,KApBL,CAoBW,SAACC,KAAD,CAAW,CACdT,OAAO,CAACC,GAAR,CAAYQ,KAAZ,EACH,CAtBL,EAuBH,CACJ,CA1BD,CA2BA,GAAMW,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAGvBnC,KAAK,WAAIxC,GAAJ,qBAA2B,CAC5ByC,MAAM,CAAE,MADoB,CAE5BC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFmB,CAM5B8B,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBE,MAAM,CAAEnD,QAAQ,CAAC,QAAD,CADC,CAAf,CANsB,CAA3B,CAAL,CAUGkB,IAVH,CAUQ,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EAVR,EAWKF,IAXL,CAWU,SAACG,MAAD,CAAY,CACdW,SAAS,gCACFC,MADE,MAELC,MAAM,CAAE,IAFH,CAGLE,OAAO,CAAEf,MAHJ,GAAT,CAKA+B,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACH,CAlBL,EAmBKhB,KAnBL,CAmBW,SAACC,KAAD,CAAW,CACdT,OAAO,CAACC,GAAR,CAAYQ,KAAZ,EACH,CArBL,EAuBH,CA1BD,CA4BA,GAAMgB,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,CACzB,mBACI,WAAG,SAAS,CAAC,MAAb,eAAuBA,KAAK,CAACC,QAA7B,OADJ,CAGH,CAJD,CAKA,gBAAgCnF,QAAQ,CAAC,IAAD,CAAxC,2CAAOoF,QAAP,gBAAiBC,WAAjB,gBACA,gBAA0BrF,QAAQ,EAAlC,2CAAOsF,KAAP,gBAAcC,QAAd,gBACA,mBACI,MAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,WAuEK7D,QAAQ,EAAI8C,SAAZ,cACG,KAAC,cAAD,EACI,WAAW,CAAE3C,WADjB,CAEI,IAAI,CAAEH,QAFV,CAGI,MAAM,CAAEiC,MAHZ,CAII,SAAS,CAAED,SAJf,CAKI,OAAO,CAAE/B,WALb,CAMI,SAAS,CAAEM,SANf,CAOI,YAAY,CAAEE,YAPlB,EASA;AAVH,CAWK,EAlFV,cAsFI,KAAC,IAAD,EAAM,SAAS,CAAE,QAAjB,CAA2B,IAAI,KAA/B,uBACI,KAAC,MAAD,EACI,WAAW,CAAC,QADhB,CAEI,YAAY,CAAEb,MAFlB,CAE0B,QAAQ,CAC1B,kBAACkE,CAAD,CAAO,CACHjE,SAAS,CAACiE,CAAC,CAACC,MAAF,CAASH,KAAV,CAAT,CACH,CALT,UAOK9D,KAAK,CAACkE,GAAN,CAAU,SAACC,GAAD,CAAMC,KAAN,CAAgB,CACvB,mBACI,KAAC,QAAD,EAAU,KAAK,CAAED,GAAjB,UAAoCA,GAApC,EAA2BC,KAA3B,CADJ,CAGH,CAJA,CAPL,EADJ,EAtFJ,cAqGI,MAAC,MAAD,yBACI,MAAC,UAAD,yBACI,KAAC,gBAAD,sBADJ,cAEI,KAAC,gBAAD,mBAFJ,cAGI,KAAC,gBAAD,0BAHJ,GADJ,cAOI,KAAC,UAAD,WACKxE,IAAI,CAACsE,GAAL,CAAS,SAACG,CAAD,CAAID,KAAJ,CAAc,CACpB,mBACI,MAAC,SAAD,yBACI,KAAC,cAAD,WAAiBC,CAAC,CAACC,MAAnB,EADJ,cAEI,KAAC,cAAD,WAAiBD,CAAC,CAACE,IAAnB,EAFJ,cAGI,KAAC,cAAD,WAAiBF,CAAC,CAACG,UAAnB,EAHJ,cAII,KAAC,cAAD,wBAAgB,KAAC,MAAD,EACZ,OAAO,CAAE,kBAAM,CACXrE,WAAW,CAACP,IAAI,CAACwE,KAAD,CAAL,CAAX,CACH,CAHW,kBAAhB,EAJJ,GAAgBA,KAAhB,CADJ,CAaH,CAdA,CADL,EAPJ,GArGJ,GADJ,CAqIH,CA/TD,CAgUA,cAAezE,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { url } from '../Constants';\nimport { Button, Grid, MenuItem, Select, TextField, Typography } from '@mui/material';\nimport { CAlert, CFormSelect, CFormText, CTable, CTableBody, CTableDataCell, CTableHead, CTableHeaderCell, CTableRow } from '@coreui/react';\nimport { AlertMessage } from './Support/AlertMessage';\nimport { DataEntryForms } from './DataEntryForm';\n\nconst EditData = () => {\n    const [data, setdata] = useState([]);\n    const [pageno, setPageno] = useState(0);\n    const [pages, setPages] = useState([]);\n    const [editdata, seteditdata] = useState();\n    const items = 10;\n    const [familyheads, setFamilyheads] = useState([]);\n    const [addresses, setAddresses] = useState([]);\n\n\n\n    const [validated, setValidated] = useState(false);\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget\n\n        if (form.checkValidity() == false) {\n            // event.preventDefault()\n\n            event.stopPropagation()\n\n        }\n        else {\n            setValidated(true);\n        }\n    }\n\n    useEffect(() => {\n        fetch(`${url}/member-data-count.php`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n        })\n            .then((res) => res.json())\n            .then((result) => {\n                if (result['status'] == 1) {\n                    let pagecount = parseInt(parseInt(result['message']) / items);\n                    let pageList = [];\n                    for (let i = 0; i <= pagecount; i++) {\n                        pageList.push(i);\n                    }\n                    setPages(pageList);\n                    pageList = [];\n                }\n            })\n    }, [])\n\n    useEffect(() => {\n        fetch(`${url}/data-fetch.php?page_no=${pageno}&items=${items}`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        }).then((res) => res.json())\n            .then((result) => {\n                if (result['status'] == 1) {\n                    let mess = result['message'];\n                    for (let i = 0; i < mess.length; i++) {\n                       mess[i].InitialSID = mess[i]['SelfID'];                        \n                    }\n                    console.log(mess);\n                    setdata(mess);\n                }\n                else {\n                    setNotify({\n                        ...notify,\n                        isOpen: true,\n                        severity: result['status'] == 1 ? \"success\" : \"error\",\n                        message: String(result['message'])\n                    });\n                }\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n    }, [pageno,validated]);\n\n\n    useEffect(()=>{\n        searchfamilyhead();\n        makechanges();\n    },[validated])\n\n\n\n    const searchfamilyhead = () => {\n        fetch(`${url}/searchfamilyhead.php`, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        })\n            .then(res => res.json())\n            .then((result) => {\n                let filteredresult = [...new Set(result)];\n                setFamilyheads(filteredresult);\n            }).catch((error) => {\n                console.error(error);\n            });\n    }\n    const searchaddress = () => {\n        fetch(`${url}/searchaddress.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        })\n            .then(res => res.json())\n            .then((result) => {\n                let filteredresult = [...new Set(result)];\n                setAddresses(filteredresult);\n            }).catch((error) => {\n                console.error(error);\n            });\n    }\n    const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n\n    const makechanges = () => {\n        if(editdata!==undefined){\n            fetch(`${url}/data-edit.php`, {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    data: editdata\n                })\n    \n            }).then((res) => res.json())\n                .then((result) => {\n                    setNotify({\n                        ...notify,\n                        isOpen: true,\n                        severity:result['status']==1?'success':'error',\n                        message: result['message']\n                    });\n                    setValidated(false);\n                })\n                .catch((error) => {\n                    console.log(error);\n                })\n        }\n    }\n    const deleteRecord = () => {\n\n\n        fetch(`${url}/data-delete.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                selfid: editdata['SelfID']\n            })\n\n        }).then((res) => res.json())\n            .then((result) => {\n                setNotify({\n                    ...notify,\n                    isOpen: true,\n                    message: result\n                })\n                window.location.reload();\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n\n    }\n\n    const Typograph = (props) => {\n        return (\n            <p className='lead' > {props.children} </p>\n        )\n    }\n    const [searchby, setsearchby] = useState(\"id\");\n    const [value, setvalue] = useState();\n    return (\n        <Grid className=\"editform\" >\n            \n            {/* <Grid style={{ display: 'flex', flexDirection: 'column' }}>\n                <Typograph >\n                    Search by\n                </Typograph>\n                <Grid\n                    width={100}\n                >\n                    <Select\n                        name=\"searchby\"\n                        defaultValue={\"name\"}\n                        onChange={(event) => setsearchby(event.target.value)}\n                    >\n                        <MenuItem value=\"id\">Id</MenuItem>\n                        <MenuItem value=\"name\">Name</MenuItem>\n                    </Select>\n                </Grid>\n                <TextField\n                    onChange={(event) => {\n                        const func = (k) => {\n                            const str = k.split(' ');\n                            for (let i = 0; i < str.length; i++) {\n\n                                str[i] = str[i].charAt(0).toUpperCase() + str[i].substring(1);\n                            }\n\n                            return str.join(' ');\n                        }\n                        let val = searchby === \"id\" ? event.target.value.toUpperCase() : func(event.target.value);\n                        setvalue(searchby === \"id\" ? event.target.value.toUpperCase() : func(event.target.value));\n\n                        if (searchby === \"id\") {\n                            data.map((l, index) => {\n                                if (l.FamilyID === val) {\n                                    setrow(index);\n                                    setdisplay2(\"block\");\n                                }\n                            })\n                        } else if (searchby === \"name\") {\n                            data.map((l, index) => {\n                                if (l.Name === val) {\n                                    setrow(index);\n                                    setdisplay2(\"block\");\n                                }\n                            })\n\n                        }\n                    }}\n                    style={{ width: 250, marginTop: 30, marginBottom: 30 }}\n                    value={value}\n                    placeholder={`Enter ${searchby}`}\n                    list={searchby === \"id\" ? \"idsearch\" : \"namesearch\"}\n                />\n\n                <datalist id=\"idsearch\" >\n                    {data.map((k, key) => {\n                        return (\n                            <option key={key}>{k.FamilyID}</option>\n                        )\n                    })}\n                </datalist>\n\n                <datalist id=\"namesearch\" >\n                    {data.map((k, key) => {\n                        return (\n                            <option key={key} >{k.Name}</option>\n                        )\n                    })}\n                </datalist>\n            </Grid> */}\n            {editdata != undefined ?\n                <DataEntryForms\n                    familyheads={familyheads}\n                    data={editdata}\n                    notify={notify}\n                    setNotify={setNotify}\n                    setData={seteditdata}\n                    validated={validated}\n                    handleSubmit={handleSubmit}\n                />\n                // console.log(editdata)\n                : ''\n\n            }\n\n            <Grid direction={\"column\"} item>\n                <Select\n                    placeholder=\"Pageno\"\n                    defaultValue={pageno} onChange={\n                        (e) => {\n                            setPageno(e.target.value)\n                        }\n                    }>\n                    {pages.map((val, index) => {\n                        return (\n                            <MenuItem value={val} key={index} >{val}</MenuItem>\n                        )\n                    })}\n                </Select>\n            </Grid>\n            <CTable>\n                <CTableHead>\n                    <CTableHeaderCell>SELF ID</CTableHeaderCell>\n                    <CTableHeaderCell>Name</CTableHeaderCell>\n                    <CTableHeaderCell>Family head</CTableHeaderCell>\n\n                </CTableHead>\n                <CTableBody>\n                    {data.map((k, index) => {\n                        return (\n                            <CTableRow key={index}>\n                                <CTableDataCell>{k.SelfID}</CTableDataCell>\n                                <CTableDataCell>{k.Name}</CTableDataCell>\n                                <CTableDataCell>{k.FamilyHead}</CTableDataCell>\n                                <CTableDataCell><Button\n                                    onClick={() => {\n                                        seteditdata(data[index]);\n                                    }}\n                                >Edit</Button></CTableDataCell>\n\n                            </CTableRow>\n                        )\n                    })}\n                </CTableBody>\n            </CTable>\n\n\n\n\n        </Grid>\n    )\n}\nexport default EditData;"]},"metadata":{},"sourceType":"module"}