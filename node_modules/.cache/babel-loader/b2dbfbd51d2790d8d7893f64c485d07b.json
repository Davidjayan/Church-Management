{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/mydev/Church-Management/src/views/Components/Dataentry.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { url } from '../Constants';\nimport { DataEntryForms } from './DataEntryForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Dataentry = () => {\n  _s();\n\n  const [familyheads, setFamilyheads] = useState([]);\n  const [notify, setNotify] = useState({\n    isOpen: false,\n    message: '',\n    variant: 'filled',\n    severity: 'error'\n  });\n  const [validity, setValidity] = useState(true);\n  const [age, setAge] = useState();\n  const [data, setData] = useState({\n    name: '',\n    dob: '',\n    gender: 'male',\n    weddingdate: '',\n    emailid: '',\n    mobile: '',\n    address: '',\n    familyhead: '',\n    familyid: '',\n    selfid: '',\n    android: false,\n    baptized: false,\n    married: false\n  });\n  useEffect(() => {\n    let yearDifference = 31536000000;\n    setAge(String(parseInt((new Date().getTime() - new Date(data.dob).getTime()) / yearDifference).toString().replace(\"-\", \"\")));\n    console.log(age);\n  }, [data.dob]);\n  const [validated, setValidated] = useState();\n\n  const handleSubmit = event => {\n    const form = event.currentTarget;\n\n    if (form.checkValidity() == false) {\n      // event.preventDefault()\n      event.stopPropagation();\n    } else {\n      setValidated(true);\n    }\n  };\n\n  const addrecords = () => {\n    if (validated) {\n      let Familyid = data.familyid;\n      let Selfid = data.selfid;\n      let Name = data.name;\n      let Dob = data.dob;\n      let Age = age;\n      let Gender = data.gender;\n      let Married = data.married == false ? 0 : data.married;\n      let Weddingdate = data.weddingdate;\n      let Emailid = data.emailid;\n      let Mobile = data.mobile;\n      let Address = data.address;\n      let Familyhead = data.familyhead;\n      let Baptized = data.baptized == false ? 0 : data.baptized;\n      let Android = data.android == false ? 0 : data.android;\n      fetch(`${url}/member_details.php`, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: Name,\n          dob: Dob,\n          age: Age,\n          gender: Gender,\n          married: Married,\n          weddingdate: Weddingdate,\n          emailid: Emailid,\n          mobile: Mobile,\n          address: Address,\n          familyhead: Familyhead,\n          baptized: Baptized,\n          android: Android,\n          familyid: Familyid,\n          selfid: Selfid\n        })\n      }).then(res => res.json()).then(result => {\n        setNotify({ ...notify,\n          isOpen: true,\n          severity: result['status'] == 1 ? \"success\" : \"error\",\n          message: String(result['message'])\n        });\n        setData({\n          name: '',\n          dob: new Date(),\n          gender: 'male',\n          weddingdate: '',\n          emailid: '',\n          mobile: '',\n          address: '',\n          familyhead: '',\n          familyid: '',\n          selfid: '',\n          android: false,\n          baptized: false,\n          married: false\n        });\n      }).catch(error => {\n        console.error(error);\n      });\n    } else {\n      setNotify({ ...notify,\n        isOpen: true,\n        message: \"Input all required\"\n      });\n    }\n  };\n\n  useEffect(() => {\n    addrecords();\n    setValidated(false);\n  }, [validated]);\n\n  const searchfamilyhead = () => {\n    fetch(`${url}/searchfamilyhead.php`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      let filteredresult = [...new Set(result)];\n      setFamilyheads(filteredresult);\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  useEffect(() => {\n    searchfamilyhead();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(DataEntryForms, {\n    familyheads: familyheads,\n    data: data,\n    notify: notify,\n    setNotify: setNotify,\n    setData: setData,\n    validated: validated,\n    handleSubmit: handleSubmit\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Dataentry, \"SdqvD7B0YShqDIS5rMI/2rwRr8k=\");\n\n_c = Dataentry;\nexport default Dataentry;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dataentry\");","map":{"version":3,"sources":["/home/david/Desktop/mydev/Church-Management/src/views/Components/Dataentry.js"],"names":["useEffect","useState","url","DataEntryForms","Dataentry","familyheads","setFamilyheads","notify","setNotify","isOpen","message","variant","severity","validity","setValidity","age","setAge","data","setData","name","dob","gender","weddingdate","emailid","mobile","address","familyhead","familyid","selfid","android","baptized","married","yearDifference","String","parseInt","Date","getTime","toString","replace","console","log","validated","setValidated","handleSubmit","event","form","currentTarget","checkValidity","stopPropagation","addrecords","Familyid","Selfid","Name","Dob","Age","Gender","Married","Weddingdate","Emailid","Mobile","Address","Familyhead","Baptized","Android","fetch","method","headers","Accept","body","JSON","stringify","then","res","json","result","catch","error","searchfamilyhead","filteredresult","Set"],"mappings":"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","sourcesContent":["\nimport { useEffect, useState } from 'react'\nimport { url } from '../Constants'\nimport { DataEntryForms } from './DataEntryForm'\n\n\nconst Dataentry = () => {\n  const [familyheads, setFamilyheads] = useState([]);\n  const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n  const [validity,setValidity] = useState(true);\n  const [age,setAge] = useState();\n\n\n  const [data, setData] = useState({\n    name: '',\n    dob: '',\n    gender: 'male',\n    weddingdate: '',\n    emailid: '',\n    mobile: '',\n    address: '',\n    familyhead: '',\n    familyid: '',\n    selfid: '',\n    android: false,\n    baptized: false,\n    married: false,\n  })\n\n  useEffect(() => {\n\n\n    let yearDifference = 31536000000;\n    setAge(String(parseInt((new Date().getTime()-new Date(data.dob).getTime())/yearDifference).toString().replace(\"-\",\"\")));\n\n\n    console.log(age);\n  }, [data.dob])\n  \n\n\n  const [validated, setValidated] = useState();\n\n  const handleSubmit =(event) =>{\n    const form = event.currentTarget\n\n    if (form.checkValidity() == false) {\n      // event.preventDefault()\n      \n      event.stopPropagation()\n      \n    }\n    else {\n      setValidated(true);\n    }\n  }\n\n  \n  \n\n  const addrecords = () => {\n    if (validated) {\n      let Familyid = data.familyid\n      let Selfid = data.selfid\n      let Name = data.name\n      let Dob = data.dob\n      let Age = age;\n      let Gender = data.gender\n      let Married = data.married==false?0:data.married;\n      let Weddingdate = data.weddingdate\n      let Emailid = data.emailid\n      let Mobile = data.mobile\n      let Address = data.address\n      let Familyhead = data.familyhead\n      let Baptized = data.baptized==false?0:data.baptized\n      let Android = data.android==false?0:data.android\n\n      fetch(`${url}/member_details.php`, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: Name,\n          dob: Dob,\n          age: Age,\n          gender: Gender,\n          married: Married,\n          weddingdate: Weddingdate,\n          emailid: Emailid,\n          mobile: Mobile,\n          address: Address,\n          familyhead: Familyhead,\n          baptized: Baptized,\n          android: Android,\n          familyid: Familyid,\n          selfid: Selfid,\n        }),\n      })\n        .then((res) => res.json())\n        .then((result) => {\n          setNotify({\n            ...notify,\n            isOpen:true,\n            severity:result['status']==1?\"success\":\"error\",\n            message:String(result['message'])\n          });\n          setData({\n            name: '',\n            dob: new Date(),\n            gender: 'male',\n            weddingdate: '',\n            emailid: '',\n            mobile: '',\n            address: '',\n            familyhead: '',\n            familyid: '',\n            selfid: '',\n            android: false,\n            baptized: false,\n            married: false,\n          });\n          \n        })\n        .catch((error) => {\n          console.error(error)\n        })\n    } else {\n      setNotify({\n        ...notify,\n        isOpen:true,\n        message:\"Input all required\"\n      })\n    }\n  }\n\n  useEffect(()=>{\n    addrecords();\n    setValidated(false);\n  },[validated])\n\n  const searchfamilyhead = () => {\n    fetch(`${url}/searchfamilyhead.php`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        let filteredresult = [...new Set(result)]\n        setFamilyheads(filteredresult)\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n  }\n  useEffect(() => {\n    searchfamilyhead()\n  }, [])\n\n  return (\n    <DataEntryForms\n    familyheads={familyheads}\n    data={data}\n    notify={notify}\n    setNotify={setNotify}\n    setData={setData}\n    validated={validated}\n    handleSubmit={handleSubmit}\n    />\n  )\n}\n\nexport default Dataentry\n"]},"metadata":{},"sourceType":"module"}