{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/mydev/Church-Management/src/views/Components/EditData.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { url } from '../Constants';\nimport { Button, Grid, MenuItem, Select, TextField, Typography } from '@mui/material';\nimport { CAlert, CFormSelect, CFormText, CTable, CTableBody, CTableDataCell, CTableHead, CTableHeaderCell, CTableRow } from '@coreui/react';\nimport { AlertMessage } from './Support/AlertMessage';\nimport { DataEntryForms } from './DataEntryForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditData = () => {\n  _s();\n\n  const [data, setdata] = useState([]);\n  const [pageno, setPageno] = useState(0);\n  const [pages, setPages] = useState([]);\n  const [editdata, seteditdata] = useState();\n  const items = 10;\n  const [familyheads, setFamilyheads] = useState([]);\n  const [addresses, setAddresses] = useState([]);\n  const [validated, setValidated] = useState(false);\n\n  const handleSubmit = event => {\n    const form = event.currentTarget;\n\n    if (form.checkValidity() == false) {\n      // event.preventDefault()\n      event.stopPropagation();\n    } else {\n      setValidated(true);\n    }\n  };\n\n  useEffect(() => {\n    fetch(`${url}/member-data-count.php`, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      if (result['status'] == 1) {\n        let pagecount = parseInt(parseInt(result['message']) / items);\n        let pageList = [];\n\n        for (let i = 0; i <= pagecount; i++) {\n          pageList.push(i);\n        }\n\n        setPages(pageList);\n        pageList = [];\n      }\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`${url}/data-fetch.php?page_no=${pageno}&items=${items}`, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      if (result['status'] == 1) {\n        let mess = result['message'];\n\n        for (let i = 0; i < mess.length; i++) {\n          mess[i].InitialSID = mess[i]['SelfID'];\n        }\n\n        console.log(mess);\n        setdata(mess);\n      } else {\n        setNotify({ ...notify,\n          isOpen: true,\n          severity: result['status'] == 1 ? \"success\" : \"error\",\n          message: String(result['message'])\n        });\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [pageno, validated]);\n  useEffect(() => {\n    searchfamilyhead();\n    makechanges();\n  }, [validated]);\n\n  const searchfamilyhead = () => {\n    fetch(`${url}/searchfamilyhead.php`, {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      let filteredresult = [...new Set(result)];\n      setFamilyheads(filteredresult);\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  const searchaddress = () => {\n    fetch(`${url}/searchaddress.php`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      let filteredresult = [...new Set(result)];\n      setAddresses(filteredresult);\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  const [notify, setNotify] = useState({\n    isOpen: false,\n    message: '',\n    variant: 'filled',\n    severity: 'error'\n  });\n\n  const makechanges = () => {\n    if (editdata !== undefined) {\n      fetch(`${url}/data-edit.php`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          data: editdata\n        })\n      }).then(res => res.json()).then(result => {\n        setNotify({ ...notify,\n          isOpen: true,\n          severity: result['status'] == 1 ? 'success' : 'error',\n          message: result['message']\n        });\n        setValidated(false);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  };\n\n  const deleteRecord = () => {\n    fetch(`${url}/data-delete.php`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        selfid: editdata['SelfID']\n      })\n    }).then(res => res.json()).then(result => {\n      setNotify({ ...notify,\n        isOpen: true,\n        message: result\n      });\n      window.location.reload();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const Typograph = props => {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"lead\",\n      children: [\" \", props.children, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this);\n  };\n\n  const [searchby, setsearchby] = useState(\"id\");\n  const [value, setvalue] = useState();\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    className: \"editform\",\n    children: [editdata != undefined ? /*#__PURE__*/_jsxDEV(DataEntryForms, {\n      familyheads: familyheads,\n      data: editdata,\n      notify: notify,\n      setNotify: setNotify,\n      setData: seteditdata,\n      validated: validated,\n      handleSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 17\n    }, this) // console.log(editdata)\n    : '', /*#__PURE__*/_jsxDEV(Grid, {\n      direction: \"column\",\n      item: true,\n      children: /*#__PURE__*/_jsxDEV(Select, {\n        placeholder: \"Pageno\",\n        defaultValue: pageno,\n        onChange: e => {\n          setPageno(e.target.value);\n        },\n        children: pages.map((val, index) => {\n          return /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: val,\n            children: val\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CTable, {\n      children: [/*#__PURE__*/_jsxDEV(CTableHead, {\n        children: [/*#__PURE__*/_jsxDEV(CTableHeaderCell, {\n          children: \"SELF ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CTableHeaderCell, {\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CTableHeaderCell, {\n          children: \"Family head\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CTableBody, {\n        children: data.map((k, index) => {\n          return /*#__PURE__*/_jsxDEV(CTableRow, {\n            children: [/*#__PURE__*/_jsxDEV(CTableDataCell, {\n              children: k.SelfID\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(CTableDataCell, {\n              children: k.Name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(CTableDataCell, {\n              children: k.FamilyHead\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(CTableDataCell, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => {\n                  seteditdata(data[index]);\n                },\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 33\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditData, \"dNVcVHSuRBNH3CbOp877S+Hzqys=\");\n\n_c = EditData;\nexport default EditData;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditData\");","map":{"version":3,"sources":["/home/david/Desktop/mydev/Church-Management/src/views/Components/EditData.js"],"names":["React","useEffect","useState","url","Button","Grid","MenuItem","Select","TextField","Typography","CAlert","CFormSelect","CFormText","CTable","CTableBody","CTableDataCell","CTableHead","CTableHeaderCell","CTableRow","AlertMessage","DataEntryForms","EditData","data","setdata","pageno","setPageno","pages","setPages","editdata","seteditdata","items","familyheads","setFamilyheads","addresses","setAddresses","validated","setValidated","handleSubmit","event","form","currentTarget","checkValidity","stopPropagation","fetch","method","headers","then","res","json","result","pagecount","parseInt","pageList","i","push","mess","length","InitialSID","console","log","setNotify","notify","isOpen","severity","message","String","catch","error","searchfamilyhead","makechanges","filteredresult","Set","searchaddress","variant","undefined","body","JSON","stringify","deleteRecord","selfid","window","location","reload","Typograph","props","children","searchby","setsearchby","value","setvalue","e","target","map","val","index","k","SelfID","Name","FamilyHead"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { url } from '../Constants';\nimport { Button, Grid, MenuItem, Select, TextField, Typography } from '@mui/material';\nimport { CAlert, CFormSelect, CFormText, CTable, CTableBody, CTableDataCell, CTableHead, CTableHeaderCell, CTableRow } from '@coreui/react';\nimport { AlertMessage } from './Support/AlertMessage';\nimport { DataEntryForms } from './DataEntryForm';\n\nconst EditData = () => {\n    const [data, setdata] = useState([]);\n    const [pageno, setPageno] = useState(0);\n    const [pages, setPages] = useState([]);\n    const [editdata, seteditdata] = useState();\n    const items = 10;\n    const [familyheads, setFamilyheads] = useState([]);\n    const [addresses, setAddresses] = useState([]);\n\n\n\n    const [validated, setValidated] = useState(false);\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget\n\n        if (form.checkValidity() == false) {\n            // event.preventDefault()\n\n            event.stopPropagation()\n\n        }\n        else {\n            setValidated(true);\n        }\n    }\n\n    useEffect(() => {\n        fetch(`${url}/member-data-count.php`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n        })\n            .then((res) => res.json())\n            .then((result) => {\n                if (result['status'] == 1) {\n                    let pagecount = parseInt(parseInt(result['message']) / items);\n                    let pageList = [];\n                    for (let i = 0; i <= pagecount; i++) {\n                        pageList.push(i);\n                    }\n                    setPages(pageList);\n                    pageList = [];\n                }\n            })\n    }, [])\n\n    useEffect(() => {\n        fetch(`${url}/data-fetch.php?page_no=${pageno}&items=${items}`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        }).then((res) => res.json())\n            .then((result) => {\n                if (result['status'] == 1) {\n                    let mess = result['message'];\n                    for (let i = 0; i < mess.length; i++) {\n                       mess[i].InitialSID = mess[i]['SelfID'];                        \n                    }\n                    console.log(mess);\n                    setdata(mess);\n                }\n                else {\n                    setNotify({\n                        ...notify,\n                        isOpen: true,\n                        severity: result['status'] == 1 ? \"success\" : \"error\",\n                        message: String(result['message'])\n                    });\n                }\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n    }, [pageno,validated]);\n\n\n    useEffect(()=>{\n        searchfamilyhead();\n        makechanges();\n    },[validated])\n\n\n\n    const searchfamilyhead = () => {\n        fetch(`${url}/searchfamilyhead.php`, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        })\n            .then(res => res.json())\n            .then((result) => {\n                let filteredresult = [...new Set(result)];\n                setFamilyheads(filteredresult);\n            }).catch((error) => {\n                console.error(error);\n            });\n    }\n    const searchaddress = () => {\n        fetch(`${url}/searchaddress.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        })\n            .then(res => res.json())\n            .then((result) => {\n                let filteredresult = [...new Set(result)];\n                setAddresses(filteredresult);\n            }).catch((error) => {\n                console.error(error);\n            });\n    }\n    const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n\n    const makechanges = () => {\n        if(editdata!==undefined){\n            fetch(`${url}/data-edit.php`, {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    data: editdata\n                })\n    \n            }).then((res) => res.json())\n                .then((result) => {\n                    setNotify({\n                        ...notify,\n                        isOpen: true,\n                        severity:result['status']==1?'success':'error',\n                        message: result['message']\n                    });\n                    setValidated(false);\n                })\n                .catch((error) => {\n                    console.log(error);\n                })\n        }\n    }\n    const deleteRecord = () => {\n\n\n        fetch(`${url}/data-delete.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                selfid: editdata['SelfID']\n            })\n\n        }).then((res) => res.json())\n            .then((result) => {\n                setNotify({\n                    ...notify,\n                    isOpen: true,\n                    message: result\n                })\n                window.location.reload();\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n\n    }\n\n    const Typograph = (props) => {\n        return (\n            <p className='lead' > {props.children} </p>\n        )\n    }\n    const [searchby, setsearchby] = useState(\"id\");\n    const [value, setvalue] = useState();\n    return (\n        <Grid className=\"editform\" >\n            \n            {/* <Grid style={{ display: 'flex', flexDirection: 'column' }}>\n                <Typograph >\n                    Search by\n                </Typograph>\n                <Grid\n                    width={100}\n                >\n                    <Select\n                        name=\"searchby\"\n                        defaultValue={\"name\"}\n                        onChange={(event) => setsearchby(event.target.value)}\n                    >\n                        <MenuItem value=\"id\">Id</MenuItem>\n                        <MenuItem value=\"name\">Name</MenuItem>\n                    </Select>\n                </Grid>\n                <TextField\n                    onChange={(event) => {\n                        const func = (k) => {\n                            const str = k.split(' ');\n                            for (let i = 0; i < str.length; i++) {\n\n                                str[i] = str[i].charAt(0).toUpperCase() + str[i].substring(1);\n                            }\n\n                            return str.join(' ');\n                        }\n                        let val = searchby === \"id\" ? event.target.value.toUpperCase() : func(event.target.value);\n                        setvalue(searchby === \"id\" ? event.target.value.toUpperCase() : func(event.target.value));\n\n                        if (searchby === \"id\") {\n                            data.map((l, index) => {\n                                if (l.FamilyID === val) {\n                                    setrow(index);\n                                    setdisplay2(\"block\");\n                                }\n                            })\n                        } else if (searchby === \"name\") {\n                            data.map((l, index) => {\n                                if (l.Name === val) {\n                                    setrow(index);\n                                    setdisplay2(\"block\");\n                                }\n                            })\n\n                        }\n                    }}\n                    style={{ width: 250, marginTop: 30, marginBottom: 30 }}\n                    value={value}\n                    placeholder={`Enter ${searchby}`}\n                    list={searchby === \"id\" ? \"idsearch\" : \"namesearch\"}\n                />\n\n                <datalist id=\"idsearch\" >\n                    {data.map((k, key) => {\n                        return (\n                            <option key={key}>{k.FamilyID}</option>\n                        )\n                    })}\n                </datalist>\n\n                <datalist id=\"namesearch\" >\n                    {data.map((k, key) => {\n                        return (\n                            <option key={key} >{k.Name}</option>\n                        )\n                    })}\n                </datalist>\n            </Grid> */}\n            {editdata != undefined ?\n                <DataEntryForms\n                    familyheads={familyheads}\n                    data={editdata}\n                    notify={notify}\n                    setNotify={setNotify}\n                    setData={seteditdata}\n                    validated={validated}\n                    handleSubmit={handleSubmit}\n                />\n                // console.log(editdata)\n                : ''\n\n            }\n\n            <Grid direction={\"column\"} item>\n                <Select\n                    placeholder=\"Pageno\"\n                    defaultValue={pageno} onChange={\n                        (e) => {\n                            setPageno(e.target.value)\n                        }\n                    }>\n                    {pages.map((val, index) => {\n                        return (\n                            <MenuItem value={val} key={index} >{val}</MenuItem>\n                        )\n                    })}\n                </Select>\n            </Grid>\n            <CTable>\n                <CTableHead>\n                    <CTableHeaderCell>SELF ID</CTableHeaderCell>\n                    <CTableHeaderCell>Name</CTableHeaderCell>\n                    <CTableHeaderCell>Family head</CTableHeaderCell>\n\n                </CTableHead>\n                <CTableBody>\n                    {data.map((k, index) => {\n                        return (\n                            <CTableRow key={index}>\n                                <CTableDataCell>{k.SelfID}</CTableDataCell>\n                                <CTableDataCell>{k.Name}</CTableDataCell>\n                                <CTableDataCell>{k.FamilyHead}</CTableDataCell>\n                                <CTableDataCell><Button\n                                    onClick={() => {\n                                        seteditdata(data[index]);\n                                    }}\n                                >Edit</Button></CTableDataCell>\n\n                            </CTableRow>\n                        )\n                    })}\n                </CTableBody>\n            </CTable>\n\n\n\n\n        </Grid>\n    )\n}\nexport default EditData;"]},"metadata":{},"sourceType":"module"}