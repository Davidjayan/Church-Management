{"ast":null,"code":"import _objectSpread from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{TextField}from'@mui/material';import React,{useState}from'react';import{url}from'../../Constants';import{AlertMessage}from'../Support/AlertMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Getchurchattendance=function Getchurchattendance(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),firstField=_useState2[0],setfirstField=_useState2[1];var _useState3=useState(\"none\"),_useState4=_slicedToArray(_useState3,2),display1=_useState4[0],setdisplay1=_useState4[1];var _useState5=useState(\"none\"),_useState6=_slicedToArray(_useState5,2),display2=_useState6[0],setdisplay2=_useState6[1];var _useState7=useState(\"block\"),_useState8=_slicedToArray(_useState7,2),display3=_useState8[0],setdisplay3=_useState8[1];var _useState9=useState(\"none\"),_useState10=_slicedToArray(_useState9,2),display4=_useState10[0],setdisplay4=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),fromdate=_useState12[0],setfromdate=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),todate=_useState14[0],settodate=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),namelist=_useState16[0],setnamelist=_useState16[1];var _useState17=useState({isOpen:false,message:'',variant:'filled',severity:'error'}),_useState18=_slicedToArray(_useState17,2),notify=_useState18[0],setNotify=_useState18[1];var _useState19=useState(\"FIRST SERVICE\"),_useState20=_slicedToArray(_useState19,2),service=_useState20[0],setservice=_useState20[1];var count=0;var presentcount=0;var absentcount=0;var today=new Date();var dd=today.getDate();var mm=today.getMonth()+1>12?today.getMonth():today.getMonth()+1;var yyyy=today.getFullYear();today=yyyy+\"-\"+mm+\"-\"+dd;var _useState21=useState(true),_useState22=_slicedToArray(_useState21,2),present1=_useState22[0],isPresent1=_useState22[1];var _useState23=useState(today),_useState24=_slicedToArray(_useState23,2),date=_useState24[0],setdate=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),obj=_useState26[0],setobj=_useState26[1];var _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),obj1=_useState28[0],setobj1=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),name=_useState30[0],setname=_useState30[1];var from=new Date(fromdate);var to=new Date(todate);var fromdd=from.getDate();fromdd=fromdd<10?\"0\"+fromdd:fromdd;var frommm=from.getMonth()+1>12?from.getMonth():from.getMonth()+1;frommm=frommm<10?\"0\"+frommm:frommm;if(fromdd===\"00\"){fromdd=31;frommm=frommm-1;}var fromyy=from.getFullYear();var todd=to.getDate();todd=todd<10?\"0\"+todd:todd;var tomm=to.getMonth()+1>12?to.getMonth():to.getMonth()+1;tomm=tomm<10?\"0\"+tomm:tomm;if(todd===\"00\"){todd=31;tomm=tomm-1;}var toyy=to.getFullYear();var submit1=function submit1(){if(date.length!==0){fetch(\"\".concat(url,\"/searchchurchattbydate.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({date:date})}).then(function(res){return res.json();}).then(function(result){if(result!==\"No matches found on Record\"){setobj1(result);}else{setobj1([{\"StudentName\":\"No results found\",\"Present\":1}]);setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:result}));}}).catch(function(error){console.error(error);});}else{setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:\"Input All required\"}));}};var submit=function submit(){if(fromdate&&todate&&name){fetch(\"\".concat(url,\"/searchchurchattbyname.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({name:name,fromdate:fromdate,todate:todate})}).then(function(res){return res.json();}).then(function(result){if(result!==\"No matches found on Record\"){setobj(result);setdisplay3(\"block\");setdisplay4(\"block\");}else{setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:result}));setdisplay3(\"none\");}}).catch(function(error){console.error(error);});}else{setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:\"Input All required\"}));}};var searchapi=function searchapi(){fetch(\"\".concat(url,\"/searchname.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){setnamelist(result);}).catch(function(error){console.error(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"get-student-att-body\",children:[/*#__PURE__*/_jsx(AlertMessage,{notify:notify,setNotify:setNotify}),/*#__PURE__*/_jsx(\"p\",{children:\"Search By:\"}),/*#__PURE__*/_jsxs(\"select\",{value:firstField,onChange:function onChange(event){setfirstField(event.target.value);setdisplay1(event.target.value===\"Name\"?\"block\":\"none\");setdisplay2(event.target.value===\"Date\"?\"block\":\"none\");setdisplay3(event.target.value===\"Date\"?\"none\":\"block\");},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Date\",children:\"Date\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:display1},children:[/*#__PURE__*/_jsx(TextField,{list:\"namelist\",placeholder:\"Enter Name\",value:name,onChange:function onChange(event){searchapi();var str=event.target.value.split(' ');for(var i=0;i<str.length;i++){str[i]=str[i].charAt(0).toUpperCase()+str[i].substring(1);}var Name=str.join(' ');setname(Name);}}),/*#__PURE__*/_jsx(\"datalist\",{style:{backgroundColor:\"black\"},id:\"namelist\",children:namelist.map(function(k,key){return/*#__PURE__*/_jsx(\"option\",{children:k},key);})}),/*#__PURE__*/_jsx(\"p\",{children:\"From:\"}),/*#__PURE__*/_jsx(TextField,{onChange:function onChange(event){setfromdate(event.target.valueAsDate);},type:\"date\"}),/*#__PURE__*/_jsx(\"p\",{children:\"To:\"}),/*#__PURE__*/_jsx(TextField,{onChange:function onChange(event){settodate(event.target.valueAsDate);},type:\"date\"}),/*#__PURE__*/_jsx(\"button\",{style:{margin:10},className:\"btn\",onClick:function onClick(){return submit();},children:\"Submit\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(event){setservice(event.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"FIRST SERVICE\",children:\"FIRST SERVICE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SECOND SERVICE\",children:\"SECOND SERVICE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"THIRD SERVICE\",children:\"THIRD SERVICE\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:display2},children:[/*#__PURE__*/_jsx(TextField,{type:\"date\",onChange:function onChange(event){return setdate(event.target.value);}}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(event){return isPresent1(event.target.value===\"true\"?true:false);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Present\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"Absent\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:10},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){return submit1();},children:\"Submit\"})}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(event){setservice(event.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"FIRST SERVICE\",children:\"FIRST SERVICE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SECOND SERVICE\",children:\"SECOND SERVICE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"THIRD SERVICE\",children:\"THIRD SERVICE\"})]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{color:\"#f70084\"},children:[\" People present on \",date]})})})}),obj1.map(function(p){presentcount=p.Service===service?p.Present===\"1\"?presentcount+1:presentcount:presentcount;absentcount=p.Service===service?p.Present===\"0\"?absentcount+1:absentcount:absentcount;if(p.Present===present1&&p.Service===service){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:p.Name})})},p.Name);}else{return/*#__PURE__*/_jsx(\"div\",{});}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{style:{color:\"#f70084\"},children:[\"No of Presents : \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"green\"},children:presentcount})]}),/*#__PURE__*/_jsxs(\"p\",{style:{color:\"#f70084\"},children:[\"No of Absents : \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"red\"},children:absentcount})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:display3},children:[/*#__PURE__*/_jsx(\"table\",{style:{display:\"grid\",justifyContent:\"center\"},children:obj.map(function(p){if(p.Present==1){count=count+1;if(service==p.Service){return/*#__PURE__*/_jsx(\"tbody\",{style:{backgroundColor:\"#ccc\"},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{color:\"black\",padding:20},children:p.Name}),/*#__PURE__*/_jsx(\"td\",{style:{color:\"black\",padding:20},children:p.Date})]})},p.Name);}}else{return/*#__PURE__*/_jsx(\"div\",{});}})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:display4,margin:10},children:[name,\" was present \",count,\" \",count>1?\"days\":\"day\",\" between \",fromdd+\"/\"+frommm+\"/\"+fromyy,\" to  \",todd+\"/\"+tomm+\"/\"+toyy,\" \"]})]})]});};export default Getchurchattendance;","map":{"version":3,"sources":["/home/david/Desktop/mydev/Church-Management/src/views/Components/Sub Components/Getchurchattendance.js"],"names":["TextField","React","useState","url","AlertMessage","Getchurchattendance","firstField","setfirstField","display1","setdisplay1","display2","setdisplay2","display3","setdisplay3","display4","setdisplay4","fromdate","setfromdate","todate","settodate","namelist","setnamelist","isOpen","message","variant","severity","notify","setNotify","service","setservice","count","presentcount","absentcount","today","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","present1","isPresent1","date","setdate","obj","setobj","obj1","setobj1","name","setname","from","to","fromdd","frommm","fromyy","todd","tomm","toyy","submit1","length","fetch","method","headers","body","JSON","stringify","then","res","json","result","catch","error","console","submit","searchapi","event","target","value","display","str","split","i","charAt","toUpperCase","substring","Name","join","backgroundColor","map","k","key","valueAsDate","margin","padding","color","p","Service","Present","justifyContent"],"mappings":"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","sourcesContent":["import { TextField } from '@mui/material';\nimport React, { useState } from 'react';\nimport { url } from '../../Constants';\nimport { AlertMessage } from '../Support/AlertMessage';\n\nconst Getchurchattendance = () => {\n    const [firstField, setfirstField] = useState();\n    const [display1, setdisplay1] = useState(\"none\");\n    const [display2, setdisplay2] = useState(\"none\");\n    const [display3, setdisplay3] = useState(\"block\");\n    const [display4, setdisplay4] = useState(\"none\");\n    const [fromdate, setfromdate] = useState();\n    const [todate, settodate] = useState();\n    const [namelist, setnamelist] = useState([]);\n    const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n    const [service, setservice] = useState(\"FIRST SERVICE\");\n\n    let count = 0;\n\n    let presentcount = 0;\n    let absentcount = 0;\n\n    let today = new Date();\n\n    let dd = today.getDate();\n\n    let mm = (today.getMonth() + 1) > 12 ? today.getMonth() : today.getMonth() + 1;\n\n    let yyyy = today.getFullYear();\n\n    today = yyyy + \"-\" + mm + \"-\" + dd;\n\n    const [present1, isPresent1] = useState(true);\n    const [date, setdate] = useState(today);\n    const [obj, setobj] = useState([]);\n    const [obj1, setobj1] = useState([]);\n\n    const [name, setname] = useState();\n\n    let from = new Date(fromdate);\n    let to = new Date(todate);\n\n    let fromdd = from.getDate();\n    fromdd = fromdd < 10 ? \"0\" + fromdd : fromdd;\n\n\n    let frommm = (from.getMonth() + 1) > 12 ? from.getMonth() : from.getMonth() + 1;\n    frommm = frommm < 10 ? \"0\" + frommm : frommm;\n    if (fromdd === \"00\") {\n        fromdd = 31;\n        frommm = frommm - 1;\n    }\n    let fromyy = from.getFullYear();\n\n    let todd = to.getDate();\n    todd = todd < 10 ? \"0\" + todd : todd;\n\n\n    let tomm = (to.getMonth() + 1) > 12 ? to.getMonth() : to.getMonth() + 1;\n    tomm = tomm < 10 ? \"0\" + tomm : tomm;\n    if (todd === \"00\") {\n        todd = 31;\n        tomm = tomm - 1;\n    }\n    let toyy = to.getFullYear();\n\n    const submit1 = () => {\n        if (date.length !== 0) {\n            fetch(`${url}/searchchurchattbydate.php`, {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n\n                },\n                body: JSON.stringify({\n                    date: date\n\n                })\n            })\n                .then(res => res.json())\n                .then((result) => {\n                    if (result !== \"No matches found on Record\") {\n                        setobj1(result);\n\n                    }\n                    else {\n                        setobj1([{ \"StudentName\": \"No results found\", \"Present\": 1 }]);\n                        setNotify({\n                            ...notify,\n                            isOpen:true,\n                            message:result\n                        })\n\n\n                    }\n                }).catch((error) => {\n                    console.error(error);\n                });\n\n        }\n\n\n        else {\n            setNotify({\n                ...notify,\n                isOpen:true,\n                message:\"Input All required\"\n            })\n        }\n    }\n\n    const submit = () => {\n        if (fromdate && todate && name) {\n            fetch(`${url}/searchchurchattbyname.php`, {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n\n                },\n                body: JSON.stringify({\n                    name: name,\n                    fromdate: fromdate,\n                    todate: todate\n\n                })\n            })\n                .then(res => res.json())\n                .then((result) => {\n                    if (result !== \"No matches found on Record\") {\n                        setobj(result);\n                        setdisplay3(\"block\");\n                        setdisplay4(\"block\");\n                    }\n                    else {\n                        setNotify({\n                            ...notify,\n                            isOpen:true,\n                            message:result\n                        })\n                        setdisplay3(\"none\");\n                    }\n                }).catch((error) => {\n                    console.error(error);\n                });\n\n        }\n\n\n        else {\n            setNotify({\n                ...notify,\n                isOpen:true,\n                message:\"Input All required\"\n            })\n        }\n    }\n\n\n\n    const searchapi = () => {\n        fetch(`${url}/searchname.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n\n            },\n        })\n            .then(res => res.json())\n            .then((result) => {\n                setnamelist(result);\n            }).catch((error) => {\n                console.error(error);\n            });\n    }\n\n    return (\n\n        <div className=\"get-student-att-body\" >\n                <AlertMessage\n                    notify={notify}\n                    setNotify={setNotify}\n                />\n            <p>Search By:</p>\n            <select value={firstField} onChange={(event) => {\n                setfirstField(event.target.value);\n                setdisplay1(event.target.value === \"Name\" ? \"block\" : \"none\");\n                setdisplay2(event.target.value === \"Date\" ? \"block\" : \"none\");\n                setdisplay3(event.target.value === \"Date\" ? \"none\" : \"block\");\n            }} >\n                <option>Select</option>\n                <option value=\"Name\" >Name</option>\n                <option value=\"Date\" >Date</option>\n            </select>\n            <div style={{ display: display1 }}>\n                <TextField list=\"namelist\" placeholder=\"Enter Name\" value={name} onChange={(event) => {\n                    searchapi();\n                    const str = event.target.value.split(' ');\n                    for (let i = 0; i < str.length; i++) {\n\n                        str[i] = str[i].charAt(0).toUpperCase() + str[i].substring(1);\n                    }\n\n                    const Name = str.join(' ');\n\n                    setname(Name);\n                }} ></TextField>\n\n\n                <datalist style={{ backgroundColor: \"black\" }} id=\"namelist\">\n                    {namelist.map((k, key) => {\n                        return (\n                            <option key={key}>{k}</option>\n                        )\n                    })}\n                </datalist>\n                <p>From:</p><TextField onChange={(event) => { setfromdate(event.target.valueAsDate); }} type=\"date\" ></TextField>\n                <p>To:</p><TextField onChange={(event) => { settodate(event.target.valueAsDate); }} type=\"date\" ></TextField>\n\n\n                <button style={{ margin: 10 }} className=\"btn\" onClick={() => submit()} >Submit</button>\n\n                <select onChange={(event) => {\n                    setservice(event.target.value);\n                }} >\n                    <option value=\"FIRST SERVICE\" >FIRST SERVICE</option>\n                    <option value=\"SECOND SERVICE\" >SECOND SERVICE</option>\n                    <option value=\"THIRD SERVICE\" >THIRD SERVICE</option>\n                </select>\n            </div>\n            <div style={{ display: display2 }}>\n\n                <TextField type=\"date\" onChange={(event) => setdate(event.target.value)}></TextField>\n\n                <select onChange={(event) => isPresent1(event.target.value === \"true\" ? true : false)}>\n                    <option value=\"true\" >Present</option>\n                    <option value=\"false\" >Absent</option>\n                </select>\n                <div style={{ padding: 10 }}>\n                    <button className=\"btn\" onClick={() => submit1()} >Submit</button></div>\n                <select onChange={(event) => {\n                    setservice(event.target.value);\n                }} >\n                    <option value=\"FIRST SERVICE\" >FIRST SERVICE</option>\n                    <option value=\"SECOND SERVICE\" >SECOND SERVICE</option>\n                    <option value=\"THIRD SERVICE\" >THIRD SERVICE</option>\n                </select>\n                <table>\n                    <thead>\n                        <tr>\n                            <td>\n                                <b style={{ color: \"#f70084\" }}> People present on {date}</b>\n                            </td>\n\n                        </tr>\n                    </thead>\n\n                    {obj1.map((p) => {\n                        presentcount = p.Service === service ? (p.Present === \"1\" ? presentcount + 1 : presentcount) : presentcount;\n                        absentcount = p.Service === service ? (p.Present === \"0\" ? absentcount + 1 : absentcount) : absentcount;\n                        if (p.Present === present1 && p.Service === service) {\n\n\n\n                            return (\n\n                                <tbody key={p.Name} >\n                                    <tr>\n                                        <td>\n                                            {p.Name}\n                                        </td>\n                                    </tr>\n                                </tbody>\n\n                            )\n\n                        } else {\n                            return (\n                                <div></div>\n                            )\n                        }\n\n\n\n                    })}\n                    <div>\n                        <p style={{ color: \"#f70084\" }}>No of Presents : <b style={{ color: \"green\" }}>{presentcount}</b></p>\n                        <p style={{ color: \"#f70084\" }}>No of Absents : <b style={{ color: \"red\" }}>{absentcount}</b></p>\n                    </div>\n                </table>\n\n\n            </div>\n            <div style={{ display: display3 }}>\n                <table style={{ display: \"grid\", justifyContent: \"center\" }}>\n                    {obj.map((p) => {\n\n                        if (p.Present == 1) {\n\n\n                            count = count + 1;\n                            if (service == p.Service) {\n                                return (\n                                    <tbody key={p.Name} style={{ backgroundColor: \"#ccc\" }} >\n                                        <tr>\n                                            <td style={{ color: \"black\", padding: 20 }}>{p.Name}</td>\n                                            <td style={{ color: \"black\", padding: 20 }}>{p.Date}</td>\n                                        </tr>\n                                    </tbody>\n                                );\n                            }\n                        }\n                        else {\n                            return (\n                                <div></div>\n                            )\n                        }\n                    })}\n\n                </table>\n\n\n                <div style={{ display: display4, margin: 10 }} >\n\n                    {name} was present {count} {count > 1 ? \"days\" : \"day\"} between {fromdd + \"/\" + frommm + \"/\" + fromyy} to  {todd + \"/\" + tomm + \"/\" + toyy} </div>\n            </div>\n        </div>\n\n    )\n\n}\n\nexport default Getchurchattendance;"]},"metadata":{},"sourceType":"module"}