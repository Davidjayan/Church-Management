{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/mydev/coreui-free-react-admin-template/src/views/Components/Dataentry.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { url } from '../Constants';\nimport { Grid, Button, FormControlLabel, RadioGroup, Radio, Autocomplete, formLabelClasses } from '@mui/material';\nimport { CAlert, CButton, CCol, CForm, CFormFeedback, CFormInput, CFormLabel, CFormSwitch, CFormTextarea } from '@coreui/react';\nimport { AlertMessage } from './Support/AlertMessage';\nimport { AppFooter } from 'src/components';\nimport { DataEntryForms } from './DataEntryForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Dataentry = () => {\n  _s();\n\n  const [familyheads, setFamilyheads] = useState([]);\n  const [validity, setvalidity] = useState(true);\n  const [notify, setNotify] = useState({\n    isOpen: false,\n    message: '',\n    variant: 'filled',\n    severity: 'error'\n  });\n  const [data, setData] = useState({\n    name: '',\n    dob: '',\n    gender: 'male',\n    weddingdate: '',\n    emailid: '',\n    mobile: '',\n    address: '',\n    familyhead: '',\n    familyid: '',\n    selfid: '',\n    android: false,\n    baptized: false,\n    married: false\n  });\n  const str = data.dob.split('-');\n  const today = new Date();\n  const mon = today.getMonth();\n  const year = today.getFullYear();\n  let age;\n  useEffect(() => {\n    let k = year - 1;\n    let yearDifference = 31536000000;\n\n    if (mon >= str[1]) {\n      age = year - str[0];\n    } else {\n      age = k - str[0];\n    }\n\n    console.log((new Date().getTime() - new Date(data.dob).getTime()) / yearDifference);\n  }, [data.dob]);\n  const [validated, setValidated] = useState(false);\n\n  const handleSubmit = event => {\n    const form = event.currentTarget;\n\n    if (form.checkValidity() == false) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      setValidated(true);\n      addrecords();\n    }\n  };\n\n  const addrecords = () => {\n    if (validity) {\n      let Familyid = data.familyid;\n      let Selfid = data.selfid;\n      let Name = data.name;\n      let Dob = data.dob;\n      let Age = age;\n      let Gender = data.gender;\n      let Married = data.married == false ? 0 : data.married;\n      let Weddingdate = data.weddingdate;\n      let Emailid = data.emailid;\n      let Mobile = data.mobile;\n      let Address = data.address;\n      let Familyhead = data.familyhead;\n      let Baptized = data.baptized == false ? 0 : data.baptized;\n      let Android = data.android == false ? 0 : data.android;\n      fetch(\"\".concat(url, \"/member_details.php\"), {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: Name,\n          dob: Dob,\n          age: Age,\n          gender: Gender,\n          married: Married,\n          weddingdate: Weddingdate,\n          emailid: Emailid,\n          mobile: Mobile,\n          address: Address,\n          familyhead: Familyhead,\n          baptized: Baptized,\n          android: Android,\n          familyid: Familyid,\n          selfid: Selfid\n        })\n      }).then(res => res.json()).then(result => {\n        setNotify({ ...notify,\n          isOpen: true,\n          severity: result['status'] == 1 ? \"success\" : \"error\",\n          message: String(result['message'])\n        });\n        setData({\n          name: '',\n          dob: new Date(),\n          gender: 'male',\n          weddingdate: '',\n          emailid: '',\n          mobile: '',\n          address: '',\n          familyhead: '',\n          familyid: '',\n          selfid: '',\n          android: false,\n          baptized: false,\n          married: false\n        });\n      }).catch(error => {\n        console.error(error);\n      });\n    } else {\n      setNotify({ ...notify,\n        isOpen: true,\n        message: \"Input all required\"\n      });\n    }\n  };\n\n  const searchfamilyhead = () => {\n    fetch(\"\".concat(url, \"/searchfamilyhead.php\"), {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      let filteredresult = [...new Set(result)];\n      setFamilyheads(filteredresult);\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  useEffect(() => {\n    searchfamilyhead();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(DataEntryForms, {\n    familyheads: familyheads,\n    data: data,\n    notify: notify,\n    setNotify: setNotify,\n    setData: setData,\n    validated: validated,\n    handleSubmit: handleSubmit\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Dataentry, \"JKKtlu6hDxq7Tjre8WnyDTbgHPY=\");\n\n_c = Dataentry;\nexport default Dataentry;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dataentry\");","map":{"version":3,"sources":["/home/david/Desktop/mydev/coreui-free-react-admin-template/src/views/Components/Dataentry.js"],"names":["React","useEffect","useState","url","Grid","Button","FormControlLabel","RadioGroup","Radio","Autocomplete","formLabelClasses","CAlert","CButton","CCol","CForm","CFormFeedback","CFormInput","CFormLabel","CFormSwitch","CFormTextarea","AlertMessage","AppFooter","DataEntryForms","Dataentry","familyheads","setFamilyheads","validity","setvalidity","notify","setNotify","isOpen","message","variant","severity","data","setData","name","dob","gender","weddingdate","emailid","mobile","address","familyhead","familyid","selfid","android","baptized","married","str","split","today","Date","mon","getMonth","year","getFullYear","age","k","yearDifference","console","log","getTime","validated","setValidated","handleSubmit","event","form","currentTarget","checkValidity","preventDefault","stopPropagation","addrecords","Familyid","Selfid","Name","Dob","Age","Gender","Married","Weddingdate","Emailid","Mobile","Address","Familyhead","Baptized","Android","fetch","method","headers","Accept","body","JSON","stringify","then","res","json","result","String","catch","error","searchfamilyhead","filteredresult","Set"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { url } from '../Constants'\nimport { Grid, Button, FormControlLabel, RadioGroup, Radio, Autocomplete, formLabelClasses } from '@mui/material'\nimport { CAlert, CButton, CCol, CForm, CFormFeedback, CFormInput, CFormLabel, CFormSwitch, CFormTextarea } from '@coreui/react'\nimport { AlertMessage } from './Support/AlertMessage'\nimport { AppFooter } from 'src/components'\nimport { DataEntryForms } from './DataEntryForm'\n\n\nconst Dataentry = () => {\n  const [familyheads, setFamilyheads] = useState([])\n  const [validity, setvalidity] = useState(true);\n  const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n\n  const [data, setData] = useState({\n    name: '',\n    dob: '',\n    gender: 'male',\n    weddingdate: '',\n    emailid: '',\n    mobile: '',\n    address: '',\n    familyhead: '',\n    familyid: '',\n    selfid: '',\n    android: false,\n    baptized: false,\n    married: false,\n  })\n\n  const str = data.dob.split('-')\n  const today = new Date()\n  const mon = today.getMonth()\n  const year = today.getFullYear()\n  let age\n  useEffect(() => {\n\n    let k = year - 1\n\n    let yearDifference = 31536000000;\n  \n    if (mon >= str[1]) {\n      age = year - str[0]\n    } else {\n      age = k - str[0]\n    }\n\n\n    console.log((new Date().getTime()-new Date(data.dob).getTime())/yearDifference);\n  }, [data.dob])\n  \n\n\n  const [validated, setValidated] = useState(false)\n\n  const handleSubmit = (event) => {\n    const form = event.currentTarget\n\n    if (form.checkValidity() == false) {\n      event.preventDefault()\n\n      event.stopPropagation()\n    }\n    else {\n      setValidated(true)\n      addrecords();\n    }\n\n  }\n  \n\n  const addrecords = () => {\n    if (validity) {\n      let Familyid = data.familyid\n      let Selfid = data.selfid\n      let Name = data.name\n      let Dob = data.dob\n      let Age = age\n      let Gender = data.gender\n      let Married = data.married==false?0:data.married;\n      let Weddingdate = data.weddingdate\n      let Emailid = data.emailid\n      let Mobile = data.mobile\n      let Address = data.address\n      let Familyhead = data.familyhead\n      let Baptized = data.baptized==false?0:data.baptized\n      let Android = data.android==false?0:data.android\n\n      fetch(`${url}/member_details.php`, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: Name,\n          dob: Dob,\n          age: Age,\n          gender: Gender,\n          married: Married,\n          weddingdate: Weddingdate,\n          emailid: Emailid,\n          mobile: Mobile,\n          address: Address,\n          familyhead: Familyhead,\n          baptized: Baptized,\n          android: Android,\n          familyid: Familyid,\n          selfid: Selfid,\n        }),\n      })\n        .then((res) => res.json())\n        .then((result) => {\n          setNotify({\n            ...notify,\n            isOpen:true,\n            severity:result['status']==1?\"success\":\"error\",\n            message:String(result['message'])\n          });\n          setData({\n            name: '',\n            dob: new Date(),\n            gender: 'male',\n            weddingdate: '',\n            emailid: '',\n            mobile: '',\n            address: '',\n            familyhead: '',\n            familyid: '',\n            selfid: '',\n            android: false,\n            baptized: false,\n            married: false,\n          });\n        })\n        .catch((error) => {\n          console.error(error)\n        })\n    } else {\n      setNotify({\n        ...notify,\n        isOpen:true,\n        message:\"Input all required\"\n      })\n    }\n  }\n\n  const searchfamilyhead = () => {\n    fetch(`${url}/searchfamilyhead.php`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        let filteredresult = [...new Set(result)]\n        setFamilyheads(filteredresult)\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n  }\n  useEffect(() => {\n    searchfamilyhead()\n  }, [])\n\n  return (\n    <DataEntryForms\n    familyheads={familyheads}\n    data={data}\n    notify={notify}\n    setNotify={setNotify}\n    setData={setData}\n    validated={validated}\n    handleSubmit={handleSubmit}\n    />\n  )\n}\n\nexport default Dataentry\n"]},"metadata":{},"sourceType":"module"}