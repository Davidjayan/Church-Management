{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/mydev/Church-Management/src/views/Components/Dataentry.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { url } from '../Constants';\nimport { DataEntryForms } from './DataEntryForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Dataentry = () => {\n  _s();\n\n  const [familyheads, setFamilyheads] = useState([]);\n  const [notify, setNotify] = useState({\n    isOpen: false,\n    message: '',\n    variant: 'filled',\n    severity: 'error'\n  });\n  const [validity, setValidity] = useState(true);\n  const [data, setData] = useState({\n    name: '',\n    dob: '',\n    gender: 'male',\n    weddingdate: '',\n    emailid: '',\n    mobile: '',\n    address: '',\n    familyhead: '',\n    familyid: '',\n    selfid: '',\n    android: false,\n    baptized: false,\n    married: false\n  });\n  let age;\n  useEffect(() => {\n    let yearDifference = 31536000000;\n    age = String(parseInt((new Date().getTime() - new Date(data.dob).getTime()) / yearDifference).toString().replace(\"-\", \"\"));\n    console.log(age);\n  }, [data.dob]);\n  const [validated, setValidated] = useState(false);\n\n  const handleSubmit = event => {\n    const form = event.currentTarget;\n\n    if (form.checkValidity() == false) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      setValidated(true);\n      addrecords();\n    }\n  };\n\n  const addrecords = () => {\n    if (validated) {\n      let Familyid = data.familyid;\n      let Selfid = data.selfid;\n      let Name = data.name;\n      let Dob = data.dob;\n      let Age = age;\n      let Gender = data.gender;\n      let Married = data.married == false ? 0 : data.married;\n      let Weddingdate = data.weddingdate;\n      let Emailid = data.emailid;\n      let Mobile = data.mobile;\n      let Address = data.address;\n      let Familyhead = data.familyhead;\n      let Baptized = data.baptized == false ? 0 : data.baptized;\n      let Android = data.android == false ? 0 : data.android;\n      fetch(`${url}/member_details.php`, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: Name,\n          dob: Dob,\n          age: Age,\n          gender: Gender,\n          married: Married,\n          weddingdate: Weddingdate,\n          emailid: Emailid,\n          mobile: Mobile,\n          address: Address,\n          familyhead: Familyhead,\n          baptized: Baptized,\n          android: Android,\n          familyid: Familyid,\n          selfid: Selfid\n        })\n      }).then(res => res.json()).then(result => {\n        setNotify({ ...notify,\n          isOpen: true,\n          severity: result['status'] == 1 ? \"success\" : \"error\",\n          message: String(result['message'])\n        }); // setData({\n        //   name: '',\n        //   dob: new Date(),\n        //   gender: 'male',\n        //   weddingdate: '',\n        //   emailid: '',\n        //   mobile: '',\n        //   address: '',\n        //   familyhead: '',\n        //   familyid: '',\n        //   selfid: '',\n        //   android: false,\n        //   baptized: false,\n        //   married: false,\n        // });\n      }).catch(error => {\n        console.error(error);\n      });\n    } else {\n      setNotify({ ...notify,\n        isOpen: true,\n        message: \"Input all required\"\n      });\n    }\n  };\n\n  const searchfamilyhead = () => {\n    fetch(`${url}/searchfamilyhead.php`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      let filteredresult = [...new Set(result)];\n      setFamilyheads(filteredresult);\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  useEffect(() => {\n    searchfamilyhead();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(DataEntryForms, {\n    familyheads: familyheads,\n    data: data,\n    notify: notify,\n    setNotify: setNotify,\n    setData: setData,\n    validated: validated,\n    handleSubmit: handleSubmit\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Dataentry, \"apXFZ6iTKNGccTc8LUU4TjoXAfM=\");\n\n_c = Dataentry;\nexport default Dataentry;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dataentry\");","map":{"version":3,"sources":["/home/david/Desktop/mydev/Church-Management/src/views/Components/Dataentry.js"],"names":["useEffect","useState","url","DataEntryForms","Dataentry","familyheads","setFamilyheads","notify","setNotify","isOpen","message","variant","severity","validity","setValidity","data","setData","name","dob","gender","weddingdate","emailid","mobile","address","familyhead","familyid","selfid","android","baptized","married","age","yearDifference","String","parseInt","Date","getTime","toString","replace","console","log","validated","setValidated","handleSubmit","event","form","currentTarget","checkValidity","preventDefault","stopPropagation","addrecords","Familyid","Selfid","Name","Dob","Age","Gender","Married","Weddingdate","Emailid","Mobile","Address","Familyhead","Baptized","Android","fetch","method","headers","Accept","body","JSON","stringify","then","res","json","result","catch","error","searchfamilyhead","filteredresult","Set"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react'\nimport { url } from '../Constants'\nimport { DataEntryForms } from './DataEntryForm'\n\n\nconst Dataentry = () => {\n  const [familyheads, setFamilyheads] = useState([]);\n  const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n  const [validity,setValidity] = useState(true);\n\n\n  const [data, setData] = useState({\n    name: '',\n    dob: '',\n    gender: 'male',\n    weddingdate: '',\n    emailid: '',\n    mobile: '',\n    address: '',\n    familyhead: '',\n    familyid: '',\n    selfid: '',\n    android: false,\n    baptized: false,\n    married: false,\n  })\n\n  let age\n  useEffect(() => {\n\n\n    let yearDifference = 31536000000;\n    age = String(parseInt((new Date().getTime()-new Date(data.dob).getTime())/yearDifference).toString().replace(\"-\",\"\"));\n\n\n    console.log(age);\n  }, [data.dob])\n  \n\n\n  const [validated, setValidated] = useState(false)\n\n  const handleSubmit = (event) => {\n    const form = event.currentTarget\n\n    if (form.checkValidity() == false) {\n      event.preventDefault()\n\n      event.stopPropagation()\n    }\n    else {\n      setValidated(true)\n      addrecords();\n    }\n\n  }\n  \n\n  const addrecords = () => {\n    if (validated) {\n      let Familyid = data.familyid\n      let Selfid = data.selfid\n      let Name = data.name\n      let Dob = data.dob\n      let Age = age\n      let Gender = data.gender\n      let Married = data.married==false?0:data.married;\n      let Weddingdate = data.weddingdate\n      let Emailid = data.emailid\n      let Mobile = data.mobile\n      let Address = data.address\n      let Familyhead = data.familyhead\n      let Baptized = data.baptized==false?0:data.baptized\n      let Android = data.android==false?0:data.android\n\n      fetch(`${url}/member_details.php`, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: Name,\n          dob: Dob,\n          age: Age,\n          gender: Gender,\n          married: Married,\n          weddingdate: Weddingdate,\n          emailid: Emailid,\n          mobile: Mobile,\n          address: Address,\n          familyhead: Familyhead,\n          baptized: Baptized,\n          android: Android,\n          familyid: Familyid,\n          selfid: Selfid,\n        }),\n      })\n        .then((res) => res.json())\n        .then((result) => {\n          setNotify({\n            ...notify,\n            isOpen:true,\n            severity:result['status']==1?\"success\":\"error\",\n            message:String(result['message'])\n          });\n          // setData({\n          //   name: '',\n          //   dob: new Date(),\n          //   gender: 'male',\n          //   weddingdate: '',\n          //   emailid: '',\n          //   mobile: '',\n          //   address: '',\n          //   familyhead: '',\n          //   familyid: '',\n          //   selfid: '',\n          //   android: false,\n          //   baptized: false,\n          //   married: false,\n          // });\n        })\n        .catch((error) => {\n          console.error(error)\n        })\n    } else {\n      setNotify({\n        ...notify,\n        isOpen:true,\n        message:\"Input all required\"\n      })\n    }\n  }\n\n  const searchfamilyhead = () => {\n    fetch(`${url}/searchfamilyhead.php`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        let filteredresult = [...new Set(result)]\n        setFamilyheads(filteredresult)\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n  }\n  useEffect(() => {\n    searchfamilyhead()\n  }, [])\n\n  return (\n    <DataEntryForms\n    familyheads={familyheads}\n    data={data}\n    notify={notify}\n    setNotify={setNotify}\n    setData={setData}\n    validated={validated}\n    handleSubmit={handleSubmit}\n    />\n  )\n}\n\nexport default Dataentry\n"]},"metadata":{},"sourceType":"module"}