{"ast":null,"code":"import _objectSpread from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{TextField}from'@mui/material';import React,{useState}from'react';import{url}from'../../Constants';import{AlertMessage}from'../Support/AlertMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Getstudentattendance=function Getstudentattendance(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),firstField=_useState2[0],setfirstField=_useState2[1];var _useState3=useState(\"none\"),_useState4=_slicedToArray(_useState3,2),display1=_useState4[0],setdisplay1=_useState4[1];var _useState5=useState(\"none\"),_useState6=_slicedToArray(_useState5,2),display2=_useState6[0],setdisplay2=_useState6[1];var _useState7=useState(\"none\"),_useState8=_slicedToArray(_useState7,2),display3=_useState8[0],setdisplay3=_useState8[1];var _useState9=useState(\"none\"),_useState10=_slicedToArray(_useState9,2),display4=_useState10[0],setdisplay4=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),fromdate=_useState12[0],setfromdate=_useState12[1];var _useState13=useState({isOpen:false,message:'',variant:'filled',severity:'error'}),_useState14=_slicedToArray(_useState13,2),notify=_useState14[0],setNotify=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),todate=_useState16[0],settodate=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),namelist=_useState18[0],setnamelist=_useState18[1];var count=0;var presentcount=0;var absentcount=0;var today=new Date();var dd=today.getDate();dd=dd<10?\"0\"+dd:dd;if(dd===\"00\"){dd=31;mm=mm-1;}var mm=today.getMonth()+1>12?today.getMonth():today.getMonth()+1;mm=mm<10?\"0\"+mm:mm;var yyyy=today.getFullYear();today=yyyy+\"-\"+mm+\"-\"+dd;var _useState19=useState(true),_useState20=_slicedToArray(_useState19,2),present1=_useState20[0],isPresent1=_useState20[1];var _useState21=useState(today),_useState22=_slicedToArray(_useState21,2),date=_useState22[0],setdate=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),obj=_useState24[0],setobj=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),obj1=_useState26[0],setobj1=_useState26[1];var _useState27=useState(),_useState28=_slicedToArray(_useState27,2),name=_useState28[0],setname=_useState28[1];var from=new Date(fromdate);var to=new Date(todate);var fromdd=from.getDate();fromdd=fromdd<10?\"0\"+fromdd:fromdd;if(fromdd===\"00\"){fromdd=31;frommm=frommm-1;}var frommm=from.getMonth()+1>12?from.getMonth():from.getMonth()+1;frommm=frommm<10?\"0\"+frommm:frommm;var fromyy=from.getFullYear();var todd=to.getDate();todd=todd<10?\"0\"+todd:todd;if(todd===\"00\"){todd=31;tomm=tomm-1;}var tomm=to.getMonth()+1>12?to.getMonth():to.getMonth()+1;tomm=tomm<10?\"0\"+tomm:tomm;var toyy=to.getFullYear();var submit1=function submit1(){if(date){fetch(\"\".concat(url,\"/searchbydate.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({date:date})}).then(function(res){return res.json();}).then(function(result){if(result!==\"No matches found on Record\"){setobj1(result);}else{setobj1([{\"StudentName\":\"No results found\",\"Present\":1}]);setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:result}));}}).catch(function(error){console.error(error);});}else{setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:'Input All required'}));}};var submit=function submit(){if(fromdate&&todate&&name){fetch(\"\".concat(url,\"/searchbystudentname.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({name:name,fromdate:fromdate,todate:todate})}).then(function(res){return res.json();}).then(function(result){if(result!==\"No matches found on Record\"){setobj(result);setdisplay3(\"block\");setdisplay4(\"block\");}else{setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:result}));setdisplay3(\"none\");}}).catch(function(error){console.error(error);});}else{setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:'Input All required'}));}};var searchapi=function searchapi(){fetch(\"\".concat(url,\"/searchstudentname.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){setnamelist(result);}).catch(function(error){console.error(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"get-student-att-body\",children:[/*#__PURE__*/_jsx(AlertMessage,{notify:notify,setNotify:setNotify}),/*#__PURE__*/_jsx(\"p\",{children:\"Search By:\"}),/*#__PURE__*/_jsxs(\"select\",{value:firstField,onChange:function onChange(event){setfirstField(event.target.value);setdisplay1(event.target.value===\"Name\"?\"block\":\"none\");setdisplay2(event.target.value===\"Date\"?\"block\":\"none\");setdisplay3(event.target.value===\"Date\"?\"none\":\"block\");},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Date\",children:\"Date\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:display1},children:[/*#__PURE__*/_jsx(TextField,{list:\"namelist\",placeholder:\"Enter Name\",value:name,onChange:function onChange(event){var str=event.target.value.split(' ');for(var i=0;i<str.length;i++){str[i]=str[i].charAt(0).toUpperCase()+str[i].substring(1);}var Name=str.join(' ');setname(Name);searchapi();}}),/*#__PURE__*/_jsx(\"datalist\",{style:{backgroundColor:\"black\"},id:\"namelist\",children:namelist.map(function(k,key){return/*#__PURE__*/_jsx(\"option\",{children:k},key);})}),/*#__PURE__*/_jsx(\"p\",{children:\"From:\"}),/*#__PURE__*/_jsx(TextField,{onChange:function onChange(event){setfromdate(event.target.valueAsDate);},type:\"date\"}),/*#__PURE__*/_jsx(\"p\",{children:\"To:\"}),/*#__PURE__*/_jsx(TextField,{onChange:function onChange(event){settodate(event.target.valueAsDate);},type:\"date\"}),/*#__PURE__*/_jsx(\"button\",{style:{margin:10},className:\"btn\",onClick:function onClick(){return submit();},children:\"Submit\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:display2},children:[/*#__PURE__*/_jsx(TextField,{type:\"date\",onChange:function onChange(event){return setdate(event.target.value);}}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(event){return isPresent1(event.target.value===\"true\"?true:false);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Present\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"Absent\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:10},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){return submit1();},children:\"Submit\"})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"b\",{style:{color:\"#f70084\"},children:[\" Students present on \",date]})})})}),obj1.map(function(p){presentcount=p.Present===\"1\"?presentcount+1:presentcount;absentcount=p.Present===\"0\"?absentcount+1:absentcount;if(p.Present==present1){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:p.StudentName})})},p.StudentName);}else{}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{style:{color:\"#f70084\"},children:[\"No of Presents : \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"green\"},children:presentcount})]}),/*#__PURE__*/_jsxs(\"p\",{style:{color:\"#f70084\"},children:[\"No of Absents : \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"red\"},children:absentcount})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:display3},children:[/*#__PURE__*/_jsx(\"table\",{style:{display:\"grid\",justifyContent:\"center\"},children:obj.map(function(p){if(p.Present==1){count=count+1;return/*#__PURE__*/_jsx(\"tbody\",{style:{backgroundColor:\"#ccc\"},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{color:\"black\",padding:20},children:p.StudentName}),/*#__PURE__*/_jsx(\"td\",{style:{color:\"black\",padding:20},children:p.Date})]})},p.StudentName);}})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:display4,margin:10},children:[name,\" was present \",count,\" \",count>1?\"days\":\"day\",\" between \",fromdd+\"/\"+frommm+\"/\"+fromyy,\" to  \",todd+\"/\"+tomm+\"/\"+toyy,\" \"]})]})]});};export default Getstudentattendance;","map":{"version":3,"sources":["/home/david/Desktop/mydev/Church-Management/src/views/Components/Sub Components/Getstudentattendance.js"],"names":["TextField","React","useState","url","AlertMessage","Getstudentattendance","firstField","setfirstField","display1","setdisplay1","display2","setdisplay2","display3","setdisplay3","display4","setdisplay4","fromdate","setfromdate","isOpen","message","variant","severity","notify","setNotify","todate","settodate","namelist","setnamelist","count","presentcount","absentcount","today","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","present1","isPresent1","date","setdate","obj","setobj","obj1","setobj1","name","setname","from","to","fromdd","frommm","fromyy","todd","tomm","toyy","submit1","fetch","method","headers","body","JSON","stringify","then","res","json","result","catch","error","console","submit","searchapi","event","target","value","display","str","split","i","length","charAt","toUpperCase","substring","Name","join","backgroundColor","map","k","key","valueAsDate","margin","padding","color","p","Present","StudentName","justifyContent"],"mappings":"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","sourcesContent":["import { TextField } from '@mui/material';\nimport React, { useState } from 'react';\nimport { url } from '../../Constants';\nimport { AlertMessage } from '../Support/AlertMessage';\n\nconst Getstudentattendance = () => {\n    const [firstField, setfirstField] = useState();\n    const [display1, setdisplay1] = useState(\"none\");\n    const [display2, setdisplay2] = useState(\"none\");\n    const [display3, setdisplay3] = useState(\"none\");\n    const [display4, setdisplay4] = useState(\"none\");\n    const [fromdate, setfromdate] = useState();\n    const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n    const [todate, settodate] = useState();\n    const [namelist, setnamelist] = useState([]);\n\n    let count = 0;\n\n    let presentcount = 0;\n    let absentcount = 0;\n    let today = new Date();\n\n    let dd = today.getDate();\n    dd = dd < 10 ? \"0\" + dd : dd;\n    if (dd === \"00\") {\n        dd = 31;\n        mm = mm - 1;\n    }\n\n    let mm = (today.getMonth() + 1) > 12 ? today.getMonth() : today.getMonth() + 1;\n    mm = mm < 10 ? \"0\" + mm : mm;\n    let yyyy = today.getFullYear();\n\n    today = yyyy + \"-\" + mm + \"-\" + dd;\n\n    const [present1, isPresent1] = useState(true);\n    const [date, setdate] = useState(today);\n    const [obj, setobj] = useState([]);\n    const [obj1, setobj1] = useState([]);\n\n    const [name, setname] = useState();\n\n    let from = new Date(fromdate);\n    let to = new Date(todate);\n\n    let fromdd = from.getDate();\n    fromdd = fromdd < 10 ? \"0\" + fromdd : fromdd;\n    if (fromdd === \"00\") {\n        fromdd = 31;\n        frommm = frommm - 1;\n    }\n\n    let frommm = (from.getMonth() + 1) > 12 ? from.getMonth() : from.getMonth() + 1;\n    frommm = frommm < 10 ? \"0\" + frommm : frommm;\n    let fromyy = from.getFullYear();\n\n    let todd = to.getDate();\n    todd = todd < 10 ? \"0\" + todd : todd;\n    if (todd === \"00\") {\n        todd = 31;\n        tomm = tomm - 1;\n    }\n\n    let tomm = (to.getMonth() + 1) > 12 ? to.getMonth() : to.getMonth() + 1;\n    tomm = tomm < 10 ? \"0\" + tomm : tomm;\n    let toyy = to.getFullYear();\n\n    const submit1 = () => {\n        if (date) {\n            fetch(`${url}/searchbydate.php`, {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n\n                },\n                body: JSON.stringify({\n                    date: date\n\n                })\n            })\n                .then(res => res.json())\n                .then((result) => {\n                    if (result !== \"No matches found on Record\") {\n                        setobj1(result);\n\n                    }\n                    else {\n                        setobj1([{ \"StudentName\": \"No results found\", \"Present\": 1 }]);\n                        setNotify({\n                            ...notify,\n                            isOpen:true,\n                            message:result\n                        })\n\n\n                    }\n                }).catch((error) => {\n                    console.error(error);\n                });\n\n        }\n\n\n        else {\n            setNotify({\n                ...notify,\n                isOpen:true,\n                message:'Input All required'\n            })\n        }\n    }\n\n    const submit = () => {\n        if (fromdate && todate && name) {\n            fetch(`${url}/searchbystudentname.php`, {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n\n                },\n                body: JSON.stringify({\n                    name: name,\n                    fromdate: fromdate,\n                    todate: todate\n\n                })\n            })\n                .then(res => res.json())\n                .then((result) => {\n                    if (result !== \"No matches found on Record\") {\n                        setobj(result);\n                        setdisplay3(\"block\");\n                        setdisplay4(\"block\");\n                    }\n                    else {\n                        setNotify({\n                            ...notify,\n                            isOpen:true,\n                            message:result\n                        })\n                        setdisplay3(\"none\");\n                    }\n                }).catch((error) => {\n                    console.error(error);\n                });\n\n        }\n\n\n        else {\n            setNotify({\n                ...notify,\n                isOpen:true,\n                message:'Input All required'\n            })\n        }\n    }\n\n\n    const searchapi = () => {\n        fetch(`${url}/searchstudentname.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n\n            },\n        })\n            .then(res => res.json())\n            .then((result) => {\n                setnamelist(result);\n            }).catch((error) => {\n                console.error(error);\n            });\n    }\n\n    return (\n\n        <div className=\"get-student-att-body\" >\n            <AlertMessage\n            notify={notify}\n            setNotify={setNotify}\n            />\n            <p>Search By:</p>\n            <select value={firstField} onChange={(event) => {\n                setfirstField(event.target.value);\n                setdisplay1(event.target.value === \"Name\" ? \"block\" : \"none\");\n                setdisplay2(event.target.value === \"Date\" ? \"block\" : \"none\");\n                setdisplay3(event.target.value === \"Date\" ? \"none\" : \"block\");\n            }} >\n                <option>Select</option>\n                <option value=\"Name\" >Name</option>\n                <option value=\"Date\" >Date</option>\n            </select>\n            <div style={{ display: display1 }}>\n                <TextField list=\"namelist\" placeholder=\"Enter Name\" value={name} onChange={(event) => {\n                    const str = event.target.value.split(' ');\n                    for (let i = 0; i < str.length; i++) {\n\n                        str[i] = str[i].charAt(0).toUpperCase() + str[i].substring(1);\n                    }\n\n                    const Name = str.join(' ');\n\n                    setname(Name); searchapi();\n                }} ></TextField>\n                <datalist style={{ backgroundColor: \"black\" }} id=\"namelist\">\n                    {namelist.map((k, key) => {\n                        return (\n                            <option key={key} >{k}</option>\n                        )\n                    })}\n                </datalist>\n                <p>From:</p><TextField onChange={(event) => { setfromdate(event.target.valueAsDate); }} type=\"date\" ></TextField>\n                <p>To:</p><TextField onChange={(event) => { settodate(event.target.valueAsDate); }} type=\"date\" ></TextField>\n\n\n                <button style={{ margin: 10 }} className=\"btn\" onClick={() => submit()} >Submit</button>\n            </div>\n            <div style={{ display: display2 }}>\n\n                <TextField type=\"date\" onChange={(event) => setdate(event.target.value)}></TextField>\n\n                <select onChange={(event) => isPresent1(event.target.value === \"true\" ? true : false)}>\n                    <option value=\"true\" >Present</option>\n                    <option value=\"false\" >Absent</option>\n                </select>\n                <div style={{ padding: 10 }}>\n                    <button className=\"btn\" onClick={() => submit1()} >Submit</button></div>\n                <table>\n                    <thead>\n                        <tr>\n                            <td>\n                                <b style={{ color: \"#f70084\" }}> Students present on {date}</b>\n                            </td>\n\n                        </tr>\n                    </thead>\n\n                    {obj1.map((p) => {\n                        presentcount = p.Present === \"1\" ? presentcount + 1 : presentcount;\n                        absentcount = p.Present === \"0\" ? absentcount + 1 : absentcount;\n                        if (p.Present == present1) {\n\n                            return (\n\n                                <tbody key={p.StudentName} >\n                                    <tr>\n                                        <td>\n                                            {p.StudentName}\n                                        </td>\n                                    </tr>\n                                </tbody>\n\n                            )\n                        }\n                        else {\n\n                        }\n\n\n\n                    })}\n                    <div>\n                        <p style={{ color: \"#f70084\" }}>No of Presents : <b style={{ color: \"green\" }}>{presentcount}</b></p>\n                        <p style={{ color: \"#f70084\" }}>No of Absents : <b style={{ color: \"red\" }}>{absentcount}</b></p>\n                    </div>\n                </table>\n\n\n            </div>\n            <div style={{ display: display3 }}>\n                <table style={{ display: \"grid\", justifyContent: \"center\" }}>\n                    {obj.map((p) => {\n                        if (p.Present == 1) {\n                            count = count + 1;\n\n                            return (\n                                <tbody key={p.StudentName} style={{ backgroundColor: \"#ccc\" }} >\n                                    <tr>\n                                        <td style={{ color: \"black\", padding: 20 }}>{p.StudentName}</td>\n                                        <td style={{ color: \"black\", padding: 20 }}>{p.Date}</td>\n                                    </tr>\n                                </tbody>\n                            );\n\n                        }\n                    })}\n                </table>\n\n                <div style={{ display: display4, margin: 10 }} >\n                    {name} was present {count} {count > 1 ? \"days\" : \"day\"} between {fromdd + \"/\" + frommm + \"/\" + fromyy} to  {todd + \"/\" + tomm + \"/\" + toyy} </div>\n            </div>\n        </div>\n\n    )\n\n}\n\nexport default Getstudentattendance;"]},"metadata":{},"sourceType":"module"}