{"ast":null,"code":"import _toConsumableArray from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{url}from'../Constants';import{Button,Grid,MenuItem,Select,TextField,Typography}from'@mui/material';import{CAlert,CFormSelect,CFormText,CTable,CTableBody,CTableDataCell,CTableHead,CTableHeaderCell,CTableRow}from'@coreui/react';import{AlertMessage}from'./Support/AlertMessage';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var EditData=function EditData(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setdata=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),pageno=_useState4[0],setPageno=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),pages=_useState6[0],setPages=_useState6[1];var items=10;var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),familyheads=_useState8[0],setFamilyheads=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),addresses=_useState10[0],setAddresses=_useState10[1];useEffect(function(){fetch(\"\".concat(url,\"/member-data-count.php\"),{method:'GET',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){if(result['status']==1){var pagecount=parseInt(parseInt(result['message'])/items);var pageList=[];for(var i=0;i<=pagecount;i++){pageList.push(i);}setPages(pageList);pageList=[];console.log(pageList);}});},[]);useEffect(function(){fetch(\"\".concat(url,\"/data-fetch.php?page_no=\").concat(pageno,\"&items=\").concat(items),{method:'GET',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){if(result['status']==1){setdata(result['message']);// result['message'].map((x, key) => {\n//     setdata((currentPeople) => currentPeople.map((p, l) => l === key ? {\n//         ...p,\n//         InitialSID: p.SelfID,\n//     } : p));\n// })\n}else{setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,severity:result['status']==1?\"success\":\"error\",message:String(result['message'])}));}}).catch(function(error){console.log(error);});},[pageno]);var searchfamilyhead=function searchfamilyhead(){fetch(\"\".concat(url,\"/searchfamilyhead.php\"),{headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){var filteredresult=_toConsumableArray(new Set(result));setFamilyheads(filteredresult);}).catch(function(error){console.error(error);});};var searchaddress=function searchaddress(){fetch(\"\".concat(url,\"/searchaddress.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){var filteredresult=_toConsumableArray(new Set(result));setAddresses(filteredresult);}).catch(function(error){console.error(error);});};var _useState11=useState(\"none\"),_useState12=_slicedToArray(_useState11,2),display2=_useState12[0],setdisplay2=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),row=_useState14[0],setrow=_useState14[1];var _useState15=useState({'familyid':data[row]!==undefined?data[row]['FamilyID']!==''?true:false:true,'selfid':data[row]!==undefined?data[row]['SelfID']!==''?true:false:true,'name':data[row]!==undefined?data[row]['Name']!==''?true:false:true,'email':data[row]!==undefined?data[row]['EmailID']!==''?true:false:true,'mobile':data[row]!==undefined?data[row]['Mobile']!==''?true:false:true,'address':data[row]!==undefined?data[row]['Address']!==''?true:false:true,'familyhead':data[row]!==undefined?data[row]['FamilyHead']!==''?true:false:true}),_useState16=_slicedToArray(_useState15,2),focus=_useState16[0],isFocused=_useState16[1];var _useState17=useState({isOpen:false,message:'',variant:'filled',severity:'error'}),_useState18=_slicedToArray(_useState17,2),notify=_useState18[0],setNotify=_useState18[1];var makechanges=function makechanges(){fetch(\"\".concat(url,\"/data-edit.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({data:data[row]})}).then(function(res){return res.json();}).then(function(result){setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:result}));window.location.reload();}).catch(function(error){console.log(error);});};var deleteRecord=function deleteRecord(){fetch(\"\".concat(url,\"/data-delete.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({selfid:data[row]['SelfID']})}).then(function(res){return res.json();}).then(function(result){setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:result}));window.location.reload();}).catch(function(error){console.log(error);});};var Typograph=function Typograph(props){return/*#__PURE__*/_jsxs(\"p\",{className:\"lead\",children:[\" \",props.children,\" \"]});};var _useState19=useState(\"id\"),_useState20=_slicedToArray(_useState19,2),searchby=_useState20[0],setsearchby=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),value=_useState22[0],setvalue=_useState22[1];return/*#__PURE__*/_jsxs(Grid,{className:\"editform\",children:[/*#__PURE__*/_jsx(AlertMessage,{notify:notify,setNotify:setNotify}),/*#__PURE__*/_jsx(Grid,{direction:\"column\",item:true,children:/*#__PURE__*/_jsx(Select,{placeholder:\"Pageno\",defaultValue:pageno,onChange:function onChange(e){setPageno(e.target.value);},children:pages.map(function(val,index){return/*#__PURE__*/_jsx(MenuItem,{value:val,children:val},index);})})}),/*#__PURE__*/_jsxs(CTable,{children:[/*#__PURE__*/_jsxs(CTableHead,{children:[/*#__PURE__*/_jsx(CTableHeaderCell,{children:\"SELF ID\"}),/*#__PURE__*/_jsx(CTableHeaderCell,{children:\"Name\"}),/*#__PURE__*/_jsx(CTableHeaderCell,{children:\"Family head\"})]}),/*#__PURE__*/_jsx(CTableBody,{children:data.map(function(k,index){return/*#__PURE__*/_jsxs(CTableRow,{children:[/*#__PURE__*/_jsx(CTableDataCell,{children:k.SelfID}),/*#__PURE__*/_jsx(CTableDataCell,{children:k.Name}),/*#__PURE__*/_jsx(CTableDataCell,{children:k.FamilyHead}),/*#__PURE__*/_jsx(CTableDataCell,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setrow(index);setdisplay2(\"block\");},children:\"Edit\"})})]},index);})})]})]});};export default EditData;","map":{"version":3,"sources":["/home/david/Desktop/mydev/Church-Management/src/views/Components/EditData.js"],"names":["React","useEffect","useState","url","Button","Grid","MenuItem","Select","TextField","Typography","CAlert","CFormSelect","CFormText","CTable","CTableBody","CTableDataCell","CTableHead","CTableHeaderCell","CTableRow","AlertMessage","EditData","data","setdata","pageno","setPageno","pages","setPages","items","familyheads","setFamilyheads","addresses","setAddresses","fetch","method","headers","then","res","json","result","pagecount","parseInt","pageList","i","push","console","log","setNotify","notify","isOpen","severity","message","String","catch","error","searchfamilyhead","filteredresult","Set","searchaddress","display2","setdisplay2","row","setrow","undefined","focus","isFocused","variant","makechanges","body","JSON","stringify","window","location","reload","deleteRecord","selfid","Typograph","props","children","searchby","setsearchby","value","setvalue","e","target","map","val","index","k","SelfID","Name","FamilyHead"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { url } from '../Constants';\nimport { Button, Grid, MenuItem, Select, TextField, Typography } from '@mui/material';\nimport { CAlert, CFormSelect, CFormText, CTable, CTableBody, CTableDataCell, CTableHead, CTableHeaderCell, CTableRow } from '@coreui/react';\nimport { AlertMessage } from './Support/AlertMessage';\n\nconst EditData = () => {\n    const [data, setdata] = useState([]);\n    const [pageno, setPageno] = useState(0);\n    const [pages, setPages] = useState([]);\n    const items = 10;\n    const [familyheads, setFamilyheads] = useState([]);\n    const [addresses, setAddresses] = useState([]);\n\n\n    useEffect(() => {\n        fetch(`${url}/member-data-count.php`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n        })\n            .then((res) => res.json())\n            .then((result) => {\n                if (result['status'] == 1) {\n                    let pagecount = parseInt(parseInt(result['message']) / items);\n                    let pageList = [];\n                    for (let i = 0; i <= pagecount; i++) {\n                        pageList.push(i);\n                    }\n                    setPages(pageList);\n                    pageList = [];\n                    console.log(pageList);\n                }\n            })\n    }, [])\n\n    useEffect(() => {\n        fetch(`${url}/data-fetch.php?page_no=${pageno}&items=${items}`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        }).then((res) => res.json())\n            .then((result) => {\n                if (result['status'] == 1) {\n                    setdata(result['message']);\n                    // result['message'].map((x, key) => {\n                    //     setdata((currentPeople) => currentPeople.map((p, l) => l === key ? {\n                    //         ...p,\n                    //         InitialSID: p.SelfID,\n                    //     } : p));\n                    // })\n                }\n                else {\n                    setNotify({\n                        ...notify,\n                        isOpen: true,\n                        severity: result['status'] == 1 ? \"success\" : \"error\",\n                        message: String(result['message'])\n                    });\n                }\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n    }, [pageno]);\n\n\n    const searchfamilyhead = () => {\n        fetch(`${url}/searchfamilyhead.php`, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        })\n            .then(res => res.json())\n            .then((result) => {\n                let filteredresult = [...new Set(result)];\n                setFamilyheads(filteredresult);\n            }).catch((error) => {\n                console.error(error);\n            });\n    }\n    const searchaddress = () => {\n        fetch(`${url}/searchaddress.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        })\n            .then(res => res.json())\n            .then((result) => {\n                let filteredresult = [...new Set(result)];\n                setAddresses(filteredresult);\n            }).catch((error) => {\n                console.error(error);\n            });\n    }\n\n    const [display2, setdisplay2] = useState(\"none\");\n    const [row, setrow] = useState(0);\n    const [focus, isFocused] = useState({ 'familyid': data[row] !== undefined ? data[row]['FamilyID'] !== '' ? true : false : true, 'selfid': data[row] !== undefined ? data[row]['SelfID'] !== '' ? true : false : true, 'name': data[row] !== undefined ? data[row]['Name'] !== '' ? true : false : true, 'email': data[row] !== undefined ? data[row]['EmailID'] !== '' ? true : false : true, 'mobile': data[row] !== undefined ? data[row]['Mobile'] !== '' ? true : false : true, 'address': data[row] !== undefined ? data[row]['Address'] !== '' ? true : false : true, 'familyhead': data[row] !== undefined ? data[row]['FamilyHead'] !== '' ? true : false : true })\n    const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n\n    const makechanges = () => {\n        fetch(`${url}/data-edit.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                data: data[row]\n            })\n\n        }).then((res) => res.json())\n            .then((result) => {\n                setNotify({\n                    ...notify,\n                    isOpen: true,\n                    message: result\n                })\n                window.location.reload();\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n    }\n    const deleteRecord = () => {\n\n\n        fetch(`${url}/data-delete.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                selfid: data[row]['SelfID']\n            })\n\n        }).then((res) => res.json())\n            .then((result) => {\n                setNotify({\n                    ...notify,\n                    isOpen: true,\n                    message: result\n                })\n                window.location.reload();\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n\n    }\n\n    const Typograph = (props) => {\n        return (\n            <p className='lead' > {props.children} </p>\n        )\n    }\n    const [searchby, setsearchby] = useState(\"id\");\n    const [value, setvalue] = useState();\n    return (\n        <Grid className=\"editform\" >\n            <AlertMessage\n                notify={notify}\n                setNotify={setNotify}\n            />\n            {/* <Grid style={{ display: 'flex', flexDirection: 'column' }}>\n                <Typograph >\n                    Search by\n                </Typograph>\n                <Grid\n                    width={100}\n                >\n                    <Select\n                        name=\"searchby\"\n                        defaultValue={\"name\"}\n                        onChange={(event) => setsearchby(event.target.value)}\n                    >\n                        <MenuItem value=\"id\">Id</MenuItem>\n                        <MenuItem value=\"name\">Name</MenuItem>\n                    </Select>\n                </Grid>\n                <TextField\n                    onChange={(event) => {\n                        const func = (k) => {\n                            const str = k.split(' ');\n                            for (let i = 0; i < str.length; i++) {\n\n                                str[i] = str[i].charAt(0).toUpperCase() + str[i].substring(1);\n                            }\n\n                            return str.join(' ');\n                        }\n                        let val = searchby === \"id\" ? event.target.value.toUpperCase() : func(event.target.value);\n                        setvalue(searchby === \"id\" ? event.target.value.toUpperCase() : func(event.target.value));\n\n                        if (searchby === \"id\") {\n                            data.map((l, index) => {\n                                if (l.FamilyID === val) {\n                                    setrow(index);\n                                    setdisplay2(\"block\");\n                                }\n                            })\n                        } else if (searchby === \"name\") {\n                            data.map((l, index) => {\n                                if (l.Name === val) {\n                                    setrow(index);\n                                    setdisplay2(\"block\");\n                                }\n                            })\n\n                        }\n                    }}\n                    style={{ width: 250, marginTop: 30, marginBottom: 30 }}\n                    value={value}\n                    placeholder={`Enter ${searchby}`}\n                    list={searchby === \"id\" ? \"idsearch\" : \"namesearch\"}\n                />\n\n                <datalist id=\"idsearch\" >\n                    {data.map((k, key) => {\n                        return (\n                            <option key={key}>{k.FamilyID}</option>\n                        )\n                    })}\n                </datalist>\n\n                <datalist id=\"namesearch\" >\n                    {data.map((k, key) => {\n                        return (\n                            <option key={key} >{k.Name}</option>\n                        )\n                    })}\n                </datalist>\n            </Grid> */}\n\n            {/* <DataEntryForms\n                familyheads={familyheads}\n                data={data}\n                notify={notify}\n                setNotify={setNotify}\n                setData={setData}\n                validated={validated}\n                handleSubmit={handleSubmit}\n            /> */}\n\n            <Grid direction={\"column\"} item>\n                <Select\n                    placeholder=\"Pageno\"\n                    defaultValue={pageno} onChange={\n                        (e) => {\n                            setPageno(e.target.value)\n                        }\n                    }>\n                    {pages.map((val, index) => {\n                        return (\n                            <MenuItem value={val} key={index} >{val}</MenuItem>\n                        )\n                    })}\n                </Select>\n            </Grid>\n            <CTable>\n                <CTableHead>\n                    <CTableHeaderCell>SELF ID</CTableHeaderCell>\n                    <CTableHeaderCell>Name</CTableHeaderCell>\n                    <CTableHeaderCell>Family head</CTableHeaderCell>\n\n                </CTableHead>\n                <CTableBody>\n                    {data.map((k, index) => {\n                        return (\n                            <CTableRow key={index}>\n                                <CTableDataCell>{k.SelfID}</CTableDataCell>\n                                <CTableDataCell>{k.Name}</CTableDataCell>\n                                <CTableDataCell>{k.FamilyHead}</CTableDataCell>\n                                <CTableDataCell><Button\n                                    onClick={() => {\n                                        setrow(index);\n                                        setdisplay2(\"block\");\n                                    }}\n                                >Edit</Button></CTableDataCell>\n\n                            </CTableRow>\n                        )\n                    })}\n                </CTableBody>\n            </CTable>\n\n\n\n\n        </Grid>\n    )\n}\nexport default EditData;"]},"metadata":{},"sourceType":"module"}