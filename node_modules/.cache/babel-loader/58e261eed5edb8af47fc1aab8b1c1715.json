{"ast":null,"code":"import _objectSpread from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{CAlert}from\"@coreui/react\";import React,{useEffect,useState}from\"react\";import{url}from\"../../Constants\";import{AlertMessage}from\"../Support/AlertMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Inputchurchattendance=function Inputchurchattendance(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),namelist=_useState2[0],setnamelist=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),churchattendance=_useState4[0],setchurchattendance=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setdate=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),service=_useState8[0],setservice=_useState8[1];var _useState9=useState({isOpen:false,message:'',variant:'filled',severity:'error'}),_useState10=_slicedToArray(_useState9,2),notify=_useState10[0],setNotify=_useState10[1];var obj=[];var today=new Date();var dd=today.getDate();dd=dd<10?\"0\"+dd:dd;if(dd===\"00\"){dd=31;mm=mm-1;}var mm=today.getMonth()+1>12?today.getMonth():today.getMonth()+1;mm=mm<10?\"0\"+mm:mm;var yyyy=today.getFullYear();today=yyyy+\"-\"+mm+\"-\"+dd;useEffect(function(){fetch(\"\".concat(url,\"/searchname.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(result){setnamelist(result);}).catch(function(error){console.error(error);});},[]);var i=0;var count=namelist.length;for(i=0;i<count;i++){if(namelist[i]!==''){obj.push({\"name\":namelist[i],\"present\":false});}}useEffect(function(){setchurchattendance(obj);},[namelist]);var submit=function submit(){if(churchattendance){fetch(\"\".concat(url,\"/church_attendance.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({churchattendance:churchattendance,date:date,service:service})}).then(function(res){return res.json();}).then(function(result){setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:result}));window.location.reload();}).catch(function(error){console.error(error);});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"church-attendance-body\",children:[/*#__PURE__*/_jsx(AlertMessage,{notify:notify,setNotify:setNotify}),/*#__PURE__*/_jsxs(\"select\",{className:\"sel-inp\",onChange:function onChange(event){return setservice(event.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"FIRST SERVICE\",children:\"FIRST SERVICE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SECOND SERVICE\",children:\"SECOND SERVICE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"THIRD SERVICE\",children:\"THIRD SERVICE\"})]}),/*#__PURE__*/_jsx(\"input\",{className:\"inp\",type:\"date\",onChange:function onChange(event){setdate(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){setdate(today);},children:\"Click if Today\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date:\",date]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Present\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Absent\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:churchattendance.map(function(p){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){var temp=true;event.target.value==='true'?temp=true:temp=false;var present=temp;setchurchattendance(function(cp){return cp.map(function(x){return x.name===p.name?_objectSpread(_objectSpread({},x),{},{present:present}):x;});});},type:\"radio\",name:p.name,value:\"true\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-check present\"}),\" \"]})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){var temp=true;event.target.value==='false'?temp=false:temp=true;var present=temp;setchurchattendance(function(cp){return cp.map(function(x){return x.name===p.name?_objectSpread(_objectSpread({},x),{},{present:present}):x;});});},type:\"radio\",name:p.name,value:\"false\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-times absent\"})]}),\" \"]})]},p.name);})}),/*#__PURE__*/_jsx(\"tfoot\",{})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){submit();},children:\"Submit\"})]});};export default Inputchurchattendance;","map":{"version":3,"sources":["/home/david/Desktop/mydev/Church-Management/src/views/Components/Sub Components/Inputchurchattendance.js"],"names":["CAlert","React","useEffect","useState","url","AlertMessage","Inputchurchattendance","namelist","setnamelist","churchattendance","setchurchattendance","date","setdate","service","setservice","isOpen","message","variant","severity","notify","setNotify","obj","today","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","fetch","method","headers","then","res","json","result","catch","error","console","i","count","length","push","submit","body","JSON","stringify","window","location","reload","event","target","value","map","p","name","temp","present","cp","x"],"mappings":"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","sourcesContent":["import { CAlert } from \"@coreui/react\";\nimport React, { useEffect, useState } from \"react\";\nimport { url } from \"../../Constants\";\nimport { AlertMessage } from \"../Support/AlertMessage\";\n\nconst Inputchurchattendance = () => {\n\n  const [namelist, setnamelist] = useState([]);\n  const [churchattendance, setchurchattendance] = useState([]);\n  const [date, setdate] = useState();\n  const [service, setservice] = useState();\n  const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n\n  const obj = [];\n\n  let today = new Date();\n\n  let dd = today.getDate();\n  dd = dd < 10 ? \"0\" + dd : dd;\n  if (dd === \"00\") {\n    dd = 31;\n    mm = mm - 1;\n  }\n\n  let mm = (today.getMonth() + 1) > 12 ? today.getMonth() : today.getMonth() + 1;\n  mm = mm < 10 ? \"0\" + mm : mm;\n  let yyyy = today.getFullYear();\n\n\n  today = yyyy + \"-\" + mm + \"-\" + dd;\n\n\n  useEffect(() => {\n    fetch(`${url}/searchname.php`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n\n      },\n    })\n      .then(res => res.json())\n      .then((result) => {\n        setnamelist(result);\n      }).catch((error) => {\n        console.error(error);\n      });\n  }, []);\n\n  let i = 0;\n  const count = namelist.length;\n\n  for (i = 0; i < count; i++) {\n    if (namelist[i] !== '') {\n      obj.push({ \"name\": namelist[i], \"present\": false });\n    }\n  }\n\n  useEffect(() => {\n\n\n    setchurchattendance(obj);\n\n  }, [namelist]);\n\n  const submit = () => {\n    if (churchattendance) {\n      fetch(`${url}/church_attendance.php`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n\n        },\n        body: JSON.stringify({\n          churchattendance: churchattendance,\n          date: date,\n          service: service\n\n\n        })\n      })\n        .then(res => res.json())\n        .then((result) => {\n          setNotify({\n            ...notify,\n            isOpen:true,\n            message:result\n          })\n          window.location.reload();\n        }).catch((error) => {\n          console.error(error);\n        });\n\n    }\n  }\n\n  return (\n\n    <div className=\"church-attendance-body\">\n      <AlertMessage\n        notify={notify}\n        setNotify={setNotify}\n      />\n      <select className=\"sel-inp\" onChange={(event) => setservice(event.target.value)}>\n        <option value=\"FIRST SERVICE\">FIRST SERVICE</option>\n        <option value=\"SECOND SERVICE\">SECOND SERVICE</option>\n        <option value=\"THIRD SERVICE\">THIRD SERVICE</option>\n\n\n      </select>\n      <input className=\"inp\" type=\"date\" onChange={(event) => { setdate(event.target.value) }} ></input>\n      <button className=\"btn\" onClick={() => {\n        setdate(today)\n      }}>Click if Today</button>\n      <p>Date:{date}</p>\n      <table>\n        <thead>\n          <tr><th>Name</th>\n            <th>Present</th>\n            <th>Absent</th></tr>\n        </thead>\n        <tbody>\n          {churchattendance.map((p) => {\n            return (\n              <tr key={p.name} >\n                <td>{p.name}</td>\n                <td ><label className=\"container\"><input\n\n                  onChange={\n                    (event) => {\n                      let temp = true;\n\n                      event.target.value === 'true' ? temp = true : temp = false;\n                      const present = temp;\n                      setchurchattendance((cp) => cp.map(x => x.name === p.name ? {\n                        ...x,\n                        present\n                      } : x))\n                    }} type=\"radio\" name={p.name} value=\"true\" /> <span className=\"fas fa-check present\"></span> </label></td>\n                <td ><label className=\"container\"><input\n                  onChange={\n                    (event) => {\n                      let temp = true;\n                      event.target.value === 'false' ? temp = false : temp = true;\n                      const present = temp;\n                      setchurchattendance((cp) => cp.map(x => x.name === p.name ? {\n                        ...x,\n                        present\n                      } : x))\n                    }}\n                  type=\"radio\" name={p.name} value=\"false\" /> <span className=\"fas fa-times absent\"></span></label> </td>\n              </tr>\n            )\n          })}</tbody>\n        <tfoot></tfoot>\n\n\n      </table>\n\n      <button className=\"btn\" onClick={() => { submit() }}>Submit</button>\n\n    </div>\n  )\n}\n\nexport default Inputchurchattendance;"]},"metadata":{},"sourceType":"module"}