{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/mydev/coreui-free-react-admin-template/src/views/Components/EditData.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { url } from '../Constants';\nimport { Button, Grid, MenuItem, Select, TextField, Typography } from '@mui/material';\nimport { CAlert, CFormSelect, CFormText, CTable, CTableBody, CTableDataCell, CTableHead, CTableHeaderCell, CTableRow } from '@coreui/react';\nimport { AlertMessage } from './Support/AlertMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditData = () => {\n  _s();\n\n  const [data, setdata] = useState([]);\n  const [pageno, setPageno] = useState(0);\n  const [pages, setTotalPages] = useState();\n  const items = 10;\n  const [familyheads, setFamilyheads] = useState([]);\n  const [addresses, setAddresses] = useState([]);\n  useEffect(() => {\n    fetch(\"\".concat(url, \"/member-data-count.php\"), {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      if (result['status'] == 1) {\n        let count = parseInt(result['message']);\n        console.log(count);\n      }\n    });\n  }, []);\n  useEffect(() => {\n    fetch(\"\".concat(url, \"/data-fetch.php?page_no=\").concat(pageno, \"&items=\").concat(items), {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      if (result['status'] == 1) {\n        console.log(result['message']);\n        setdata(result['message']);\n        result['message'].map((x, key) => {\n          setdata(currentPeople => currentPeople.map((p, l) => l === key ? { ...p,\n            InitialSID: p.SelfID\n          } : p));\n        });\n      } else {\n        setNotify({ ...notify,\n          isOpen: true,\n          severity: result['status'] == 1 ? \"success\" : \"error\",\n          message: String(result['message'])\n        });\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [pageno]);\n\n  const searchfamilyhead = () => {\n    fetch(\"\".concat(url, \"/searchfamilyhead.php\"), {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      let filteredresult = [...new Set(result)];\n      setFamilyheads(filteredresult);\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  const searchaddress = () => {\n    fetch(\"\".concat(url, \"/searchaddress.php\"), {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(result => {\n      let filteredresult = [...new Set(result)];\n      setAddresses(filteredresult);\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  const [display2, setdisplay2] = useState(\"none\");\n  const [row, setrow] = useState(0);\n  const [focus, isFocused] = useState({\n    'familyid': data[row] !== undefined ? data[row]['FamilyID'] !== '' ? true : false : true,\n    'selfid': data[row] !== undefined ? data[row]['SelfID'] !== '' ? true : false : true,\n    'name': data[row] !== undefined ? data[row]['Name'] !== '' ? true : false : true,\n    'email': data[row] !== undefined ? data[row]['EmailID'] !== '' ? true : false : true,\n    'mobile': data[row] !== undefined ? data[row]['Mobile'] !== '' ? true : false : true,\n    'address': data[row] !== undefined ? data[row]['Address'] !== '' ? true : false : true,\n    'familyhead': data[row] !== undefined ? data[row]['FamilyHead'] !== '' ? true : false : true\n  });\n  const [notify, setNotify] = useState({\n    isOpen: false,\n    message: '',\n    variant: 'filled',\n    severity: 'error'\n  });\n\n  const makechanges = () => {\n    fetch(\"\".concat(url, \"/data-edit.php\"), {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        data: data[row]\n      })\n    }).then(res => res.json()).then(result => {\n      setNotify({ ...notify,\n        isOpen: true,\n        message: result\n      });\n      window.location.reload();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const deleteRecord = () => {\n    fetch(\"\".concat(url, \"/data-delete.php\"), {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        selfid: data[row]['SelfID']\n      })\n    }).then(res => res.json()).then(result => {\n      setNotify({ ...notify,\n        isOpen: true,\n        message: result\n      });\n      window.location.reload();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const Typograph = props => {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"lead\",\n      children: [\" \", props.children, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this);\n  };\n\n  const [searchby, setsearchby] = useState(\"id\");\n  const [value, setvalue] = useState();\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    className: \"editform\",\n    children: [/*#__PURE__*/_jsxDEV(AlertMessage, {\n      notify: notify,\n      setNotify: setNotify\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      style: {\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typograph, {\n        children: \"Search by\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        width: 100,\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          name: \"searchby\",\n          defaultValue: \"name\",\n          onChange: event => setsearchby(event.target.value),\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"id\",\n            children: \"Id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"name\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        onChange: event => {\n          const func = k => {\n            const str = k.split(' ');\n\n            for (let i = 0; i < str.length; i++) {\n              str[i] = str[i].charAt(0).toUpperCase() + str[i].substring(1);\n            }\n\n            return str.join(' ');\n          };\n\n          let val = searchby === \"id\" ? event.target.value.toUpperCase() : func(event.target.value);\n          setvalue(searchby === \"id\" ? event.target.value.toUpperCase() : func(event.target.value));\n\n          if (searchby === \"id\") {\n            data.map((l, index) => {\n              if (l.FamilyID === val) {\n                setrow(index);\n                setdisplay2(\"block\");\n              }\n            });\n          } else if (searchby === \"name\") {\n            data.map((l, index) => {\n              if (l.Name === val) {\n                setrow(index);\n                setdisplay2(\"block\");\n              }\n            });\n          }\n        },\n        style: {\n          width: 250,\n          marginTop: 30,\n          marginBottom: 30\n        },\n        value: value,\n        placeholder: \"Enter \".concat(searchby),\n        list: searchby === \"id\" ? \"idsearch\" : \"namesearch\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"datalist\", {\n        id: \"idsearch\",\n        children: data.map((k, key) => {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            children: k.FamilyID\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"datalist\", {\n        id: \"namesearch\",\n        children: data.map((k, key) => {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            children: k.Name\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      children: /*#__PURE__*/_jsxDEV(Select, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CTable, {\n      children: [/*#__PURE__*/_jsxDEV(CTableHead, {\n        children: [/*#__PURE__*/_jsxDEV(CTableHeaderCell, {\n          children: \"SELF ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CTableHeaderCell, {\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CTableHeaderCell, {\n          children: \"Father or Husband Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CTableBody, {\n        children: data.map((k, index) => {\n          return /*#__PURE__*/_jsxDEV(CTableRow, {\n            children: [/*#__PURE__*/_jsxDEV(CTableDataCell, {\n              children: k.SelfID\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(CTableDataCell, {\n              children: k.Name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(CTableDataCell, {\n              children: k.FamilyHead\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(CTableDataCell, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => {\n                  setrow(index);\n                  setdisplay2(\"block\");\n                },\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 33\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditData, \"YoYOYcLDv4phk1BMUBoA5mDtRAs=\");\n\n_c = EditData;\nexport default EditData;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditData\");","map":{"version":3,"sources":["/home/david/Desktop/mydev/coreui-free-react-admin-template/src/views/Components/EditData.js"],"names":["React","useEffect","useState","url","Button","Grid","MenuItem","Select","TextField","Typography","CAlert","CFormSelect","CFormText","CTable","CTableBody","CTableDataCell","CTableHead","CTableHeaderCell","CTableRow","AlertMessage","EditData","data","setdata","pageno","setPageno","pages","setTotalPages","items","familyheads","setFamilyheads","addresses","setAddresses","fetch","method","headers","then","res","json","result","count","parseInt","console","log","map","x","key","currentPeople","p","l","InitialSID","SelfID","setNotify","notify","isOpen","severity","message","String","catch","error","searchfamilyhead","filteredresult","Set","searchaddress","display2","setdisplay2","row","setrow","focus","isFocused","undefined","variant","makechanges","body","JSON","stringify","window","location","reload","deleteRecord","selfid","Typograph","props","children","searchby","setsearchby","value","setvalue","display","flexDirection","event","target","func","k","str","split","i","length","charAt","toUpperCase","substring","join","val","index","FamilyID","Name","width","marginTop","marginBottom","FamilyHead"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { url } from '../Constants';\nimport { Button, Grid, MenuItem, Select, TextField, Typography } from '@mui/material';\nimport { CAlert, CFormSelect, CFormText, CTable, CTableBody, CTableDataCell, CTableHead, CTableHeaderCell, CTableRow } from '@coreui/react';\nimport { AlertMessage } from './Support/AlertMessage';\n\nconst EditData = () => {\n    const [data, setdata] = useState([]);\n    const [pageno,setPageno]=useState(0);\n    const [pages,setTotalPages] = useState();\n    const items = 10;\n    const [familyheads, setFamilyheads] = useState([]);\n    const [addresses, setAddresses] = useState([]);\n  \n\n    useEffect(()=>{\n        fetch(`${url}/member-data-count.php`,{\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n        })\n        .then((res)=>res.json())\n        .then((result)=>{\n            if(result['status']==1){\n                let count = parseInt(result['message']);\n                console.log(count);\n            }\n        })\n    },[])\n\n    useEffect(() => {\n        fetch(`${url}/data-fetch.php?page_no=${pageno}&items=${items}`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        }).then((res) => res.json())\n            .then((result) => {\n                if(result['status']==1){\n                    console.log(result['message']);\n                    setdata(result['message']);\n                    result['message'].map((x, key) => {\n                        setdata((currentPeople) => currentPeople.map((p, l) => l === key ? {\n                            ...p,\n                            InitialSID: p.SelfID,\n                        } : p));\n                    })\n                }\n                else{\n                    setNotify({\n                        ...notify,\n                        isOpen:true,\n                        severity:result['status']==1?\"success\":\"error\",\n                        message:String(result['message'])\n                      });\n                }\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n    }, [pageno]);\n\n\n    const searchfamilyhead = () => {\n        fetch(`${url}/searchfamilyhead.php`, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        })\n            .then(res => res.json())\n            .then((result) => {\n                let filteredresult = [...new Set(result)];\n                setFamilyheads(filteredresult);\n            }).catch((error) => {\n                console.error(error);\n            });\n    }\n    const searchaddress = () => {\n        fetch(`${url}/searchaddress.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n\n        })\n            .then(res => res.json())\n            .then((result) => {\n                let filteredresult = [...new Set(result)];\n                setAddresses(filteredresult);\n            }).catch((error) => {\n                console.error(error);\n            });\n    }\n\n    const [display2, setdisplay2] = useState(\"none\");\n    const [row, setrow] = useState(0);\n    const [focus, isFocused] = useState({ 'familyid': data[row] !== undefined ? data[row]['FamilyID'] !== '' ? true : false : true, 'selfid': data[row] !== undefined ? data[row]['SelfID'] !== '' ? true : false : true, 'name': data[row] !== undefined ? data[row]['Name'] !== '' ? true : false : true, 'email': data[row] !== undefined ? data[row]['EmailID'] !== '' ? true : false : true, 'mobile': data[row] !== undefined ? data[row]['Mobile'] !== '' ? true : false : true, 'address': data[row] !== undefined ? data[row]['Address'] !== '' ? true : false : true, 'familyhead': data[row] !== undefined ? data[row]['FamilyHead'] !== '' ? true : false : true })\n    const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n\n    const makechanges = () => {\n        fetch(`${url}/data-edit.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                data: data[row]\n            })\n\n        }).then((res) => res.json())\n            .then((result) => {\n                setNotify({\n                    ...notify,\n                    isOpen:true,\n                    message:result\n                })\n                window.location.reload();\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n    }\n    const deleteRecord = () => {\n\n\n        fetch(`${url}/data-delete.php`, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                selfid: data[row]['SelfID']\n            })\n\n        }).then((res) => res.json())\n            .then((result) => {\n                setNotify({\n                    ...notify,\n                    isOpen:true,\n                    message:result\n                })\n                window.location.reload();\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n\n    }\n\n    const Typograph = (props) => {\n        return (\n            <p className='lead' > {props.children} </p>\n        )\n    }\n    const [searchby, setsearchby] = useState(\"id\");\n    const [value, setvalue] = useState();\n    return (\n        <Grid className=\"editform\" >\n            <AlertMessage\n                notify={notify}\n                setNotify={setNotify}\n            />\n            <Grid style={{ display: 'flex', flexDirection: 'column' }}>\n                <Typograph >\n                    Search by\n                </Typograph>\n                <Grid\n                    width={100}\n                >\n                    <Select\n                        name=\"searchby\"\n                        defaultValue={\"name\"}\n                        onChange={(event) => setsearchby(event.target.value)}\n                    >\n                        <MenuItem value=\"id\">Id</MenuItem>\n                        <MenuItem value=\"name\">Name</MenuItem>\n                    </Select>\n                </Grid>\n                <TextField\n                    onChange={(event) => {\n                        const func = (k) => {\n                            const str = k.split(' ');\n                            for (let i = 0; i < str.length; i++) {\n\n                                str[i] = str[i].charAt(0).toUpperCase() + str[i].substring(1);\n                            }\n\n                            return str.join(' ');\n                        }\n                        let val = searchby === \"id\" ? event.target.value.toUpperCase() : func(event.target.value);\n                        setvalue(searchby === \"id\" ? event.target.value.toUpperCase() : func(event.target.value));\n\n                        if (searchby === \"id\") {\n                            data.map((l, index) => {\n                                if (l.FamilyID === val) {\n                                    setrow(index);\n                                    setdisplay2(\"block\");\n                                }\n                            })\n                        } else if (searchby === \"name\") {\n                            data.map((l, index) => {\n                                if (l.Name === val) {\n                                    setrow(index);\n                                    setdisplay2(\"block\");\n                                }\n                            })\n\n                        }\n                    }}\n                    style={{ width: 250, marginTop: 30, marginBottom: 30 }}\n                    value={value}\n                    placeholder={`Enter ${searchby}`}\n                    list={searchby === \"id\" ? \"idsearch\" : \"namesearch\"}\n                />\n\n                <datalist id=\"idsearch\" >\n                    {data.map((k, key) => {\n                        return (\n                            <option key={key}>{k.FamilyID}</option>\n                        )\n                    })}\n                </datalist>\n\n                <datalist id=\"namesearch\" >\n                    {data.map((k, key) => {\n                        return (\n                            <option key={key} >{k.Name}</option>\n                        )\n                    })}\n                </datalist>\n            </Grid>\n\n\n\n            <Grid>\n                <Select>\n\n                </Select>\n            </Grid>\n            <CTable>\n                <CTableHead>\n                    <CTableHeaderCell>SELF ID</CTableHeaderCell>\n                    <CTableHeaderCell>Name</CTableHeaderCell>\n                    <CTableHeaderCell>Father or Husband Name</CTableHeaderCell>\n\n                </CTableHead>\n                <CTableBody>\n                    {data.map((k, index) => {\n                        return (\n                            <CTableRow key={index}>\n                                <CTableDataCell>{k.SelfID}</CTableDataCell>\n                                <CTableDataCell>{k.Name}</CTableDataCell>\n                                <CTableDataCell>{k.FamilyHead}</CTableDataCell>\n                                <CTableDataCell><Button\n                                    onClick={() => {\n                                        setrow(index);\n                                        setdisplay2(\"block\");\n                                    }}\n                                >Edit</Button></CTableDataCell>\n\n                            </CTableRow>\n                        )\n                    })}\n                </CTableBody>\n            </CTable>\n\n\n\n\n        </Grid>\n    )\n}\nexport default EditData;"]},"metadata":{},"sourceType":"module"}