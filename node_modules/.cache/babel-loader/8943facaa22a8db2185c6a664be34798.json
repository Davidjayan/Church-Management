{"ast":null,"code":"import _slicedToArray from \"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useOpenState } from './useOpenState';\nimport { useUtils } from './useUtils';\nexport var usePickerState = function usePickerState(props, valueManager) {\n  var disableCloseOnSelect = props.disableCloseOnSelect,\n      onAccept = props.onAccept,\n      onChange = props.onChange,\n      value = props.value;\n  var utils = useUtils();\n\n  var _useOpenState = useOpenState(props),\n      isOpen = _useOpenState.isOpen,\n      setIsOpen = _useOpenState.setIsOpen;\n\n  function initDraftableDate(date) {\n    return {\n      committed: date,\n      draft: date\n    };\n  }\n\n  var parsedDateValue = React.useMemo(function () {\n    return valueManager.parseInput(utils, value);\n  }, [valueManager, utils, value]);\n\n  var _React$useState = React.useState(parsedDateValue),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      lastValidDateValue = _React$useState2[0],\n      setLastValidDateValue = _React$useState2[1];\n\n  React.useEffect(function () {\n    if (parsedDateValue != null) {\n      setLastValidDateValue(parsedDateValue);\n    }\n  }, [parsedDateValue]);\n\n  var _React$useReducer = React.useReducer(function (state, action) {\n    switch (action.type) {\n      case 'reset':\n        return initDraftableDate(action.payload);\n\n      case 'update':\n        return _extends({}, state, {\n          draft: action.payload\n        });\n\n      default:\n        return state;\n    }\n  }, parsedDateValue, initDraftableDate),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      draftState = _React$useReducer2[0],\n      dispatch = _React$useReducer2[1];\n\n  if (!valueManager.areValuesEqual(utils, draftState.committed, parsedDateValue)) {\n    dispatch({\n      type: 'reset',\n      payload: parsedDateValue\n    });\n  }\n\n  var _React$useState3 = React.useState(draftState.committed),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      initialDate = _React$useState4[0],\n      setInitialDate = _React$useState4[1]; // Mobile keyboard view is a special case.\n  // When it's open picker should work like closed, because we are just showing text field\n\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      isMobileKeyboardViewOpen = _React$useState6[0],\n      setMobileKeyboardViewOpen = _React$useState6[1];\n\n  var acceptDate = React.useCallback(function (acceptedDate, needClosePicker) {\n    onChange(acceptedDate);\n\n    if (needClosePicker) {\n      setIsOpen(false);\n      setInitialDate(acceptedDate);\n\n      if (onAccept) {\n        onAccept(acceptedDate);\n      }\n    }\n  }, [onAccept, onChange, setIsOpen]);\n  var wrapperProps = React.useMemo(function () {\n    return {\n      open: isOpen,\n      onClear: function onClear() {\n        return acceptDate(valueManager.emptyValue, true);\n      },\n      onAccept: function onAccept() {\n        return acceptDate(draftState.draft, true);\n      },\n      onDismiss: function onDismiss() {\n        return acceptDate(initialDate, true);\n      },\n      onSetToday: function onSetToday() {\n        var now = utils.date();\n        dispatch({\n          type: 'update',\n          payload: now\n        });\n        acceptDate(now, !disableCloseOnSelect);\n      }\n    };\n  }, [acceptDate, disableCloseOnSelect, isOpen, utils, draftState.draft, valueManager.emptyValue, initialDate]);\n  var pickerProps = React.useMemo(function () {\n    return {\n      date: draftState.draft,\n      isMobileKeyboardViewOpen: isMobileKeyboardViewOpen,\n      toggleMobileKeyboardView: function toggleMobileKeyboardView() {\n        return setMobileKeyboardViewOpen(!isMobileKeyboardViewOpen);\n      },\n      onDateChange: function onDateChange(newDate, wrapperVariant) {\n        var selectionState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'partial';\n        dispatch({\n          type: 'update',\n          payload: newDate\n        });\n\n        if (selectionState === 'partial') {\n          acceptDate(newDate, false);\n        }\n\n        if (selectionState === 'finish') {\n          var shouldCloseOnSelect = !(disableCloseOnSelect != null ? disableCloseOnSelect : wrapperVariant === 'mobile');\n          acceptDate(newDate, shouldCloseOnSelect);\n        } // if selectionState === \"shallow\" do nothing (we already update the draft state)\n\n      }\n    };\n  }, [acceptDate, disableCloseOnSelect, isMobileKeyboardViewOpen, draftState.draft]);\n  var handleInputChange = React.useCallback(function (date, keyboardInputValue) {\n    var cleanDate = valueManager.valueReducer ? valueManager.valueReducer(utils, lastValidDateValue, date) : date;\n    onChange(cleanDate, keyboardInputValue);\n  }, [onChange, valueManager, lastValidDateValue, utils]);\n  var inputProps = React.useMemo(function () {\n    return {\n      onChange: handleInputChange,\n      open: isOpen,\n      rawValue: value,\n      openPicker: function openPicker() {\n        return setIsOpen(true);\n      }\n    };\n  }, [handleInputChange, isOpen, value, setIsOpen]);\n  var pickerState = {\n    pickerProps: pickerProps,\n    inputProps: inputProps,\n    wrapperProps: wrapperProps\n  };\n  React.useDebugValue(pickerState, function () {\n    return {\n      MuiPickerState: {\n        pickerDraft: draftState,\n        other: pickerState\n      }\n    };\n  });\n  return pickerState;\n};","map":{"version":3,"sources":["/home/david/Desktop/mydev/Church-Management/node_modules/@mui/x-date-pickers/internals/hooks/usePickerState.js"],"names":["_extends","React","useOpenState","useUtils","usePickerState","props","valueManager","disableCloseOnSelect","onAccept","onChange","value","utils","isOpen","setIsOpen","initDraftableDate","date","committed","draft","parsedDateValue","useMemo","parseInput","useState","lastValidDateValue","setLastValidDateValue","useEffect","useReducer","state","action","type","payload","draftState","dispatch","areValuesEqual","initialDate","setInitialDate","isMobileKeyboardViewOpen","setMobileKeyboardViewOpen","acceptDate","useCallback","acceptedDate","needClosePicker","wrapperProps","open","onClear","emptyValue","onDismiss","onSetToday","now","pickerProps","toggleMobileKeyboardView","onDateChange","newDate","wrapperVariant","selectionState","shouldCloseOnSelect","handleInputChange","keyboardInputValue","cleanDate","valueReducer","inputProps","rawValue","openPicker","pickerState","useDebugValue","MuiPickerState","pickerDraft","other"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useOpenState } from './useOpenState';\nimport { useUtils } from './useUtils';\nexport const usePickerState = (props, valueManager) => {\n  const {\n    disableCloseOnSelect,\n    onAccept,\n    onChange,\n    value\n  } = props;\n  const utils = useUtils();\n  const {\n    isOpen,\n    setIsOpen\n  } = useOpenState(props);\n\n  function initDraftableDate(date) {\n    return {\n      committed: date,\n      draft: date\n    };\n  }\n\n  const parsedDateValue = React.useMemo(() => valueManager.parseInput(utils, value), [valueManager, utils, value]);\n  const [lastValidDateValue, setLastValidDateValue] = React.useState(parsedDateValue);\n  React.useEffect(() => {\n    if (parsedDateValue != null) {\n      setLastValidDateValue(parsedDateValue);\n    }\n  }, [parsedDateValue]);\n  const [draftState, dispatch] = React.useReducer((state, action) => {\n    switch (action.type) {\n      case 'reset':\n        return initDraftableDate(action.payload);\n\n      case 'update':\n        return _extends({}, state, {\n          draft: action.payload\n        });\n\n      default:\n        return state;\n    }\n  }, parsedDateValue, initDraftableDate);\n\n  if (!valueManager.areValuesEqual(utils, draftState.committed, parsedDateValue)) {\n    dispatch({\n      type: 'reset',\n      payload: parsedDateValue\n    });\n  }\n\n  const [initialDate, setInitialDate] = React.useState(draftState.committed); // Mobile keyboard view is a special case.\n  // When it's open picker should work like closed, because we are just showing text field\n\n  const [isMobileKeyboardViewOpen, setMobileKeyboardViewOpen] = React.useState(false);\n  const acceptDate = React.useCallback((acceptedDate, needClosePicker) => {\n    onChange(acceptedDate);\n\n    if (needClosePicker) {\n      setIsOpen(false);\n      setInitialDate(acceptedDate);\n\n      if (onAccept) {\n        onAccept(acceptedDate);\n      }\n    }\n  }, [onAccept, onChange, setIsOpen]);\n  const wrapperProps = React.useMemo(() => ({\n    open: isOpen,\n    onClear: () => acceptDate(valueManager.emptyValue, true),\n    onAccept: () => acceptDate(draftState.draft, true),\n    onDismiss: () => acceptDate(initialDate, true),\n    onSetToday: () => {\n      const now = utils.date();\n      dispatch({\n        type: 'update',\n        payload: now\n      });\n      acceptDate(now, !disableCloseOnSelect);\n    }\n  }), [acceptDate, disableCloseOnSelect, isOpen, utils, draftState.draft, valueManager.emptyValue, initialDate]);\n  const pickerProps = React.useMemo(() => ({\n    date: draftState.draft,\n    isMobileKeyboardViewOpen,\n    toggleMobileKeyboardView: () => setMobileKeyboardViewOpen(!isMobileKeyboardViewOpen),\n    onDateChange: (newDate, wrapperVariant, selectionState = 'partial') => {\n      dispatch({\n        type: 'update',\n        payload: newDate\n      });\n\n      if (selectionState === 'partial') {\n        acceptDate(newDate, false);\n      }\n\n      if (selectionState === 'finish') {\n        const shouldCloseOnSelect = !(disableCloseOnSelect != null ? disableCloseOnSelect : wrapperVariant === 'mobile');\n        acceptDate(newDate, shouldCloseOnSelect);\n      } // if selectionState === \"shallow\" do nothing (we already update the draft state)\n\n    }\n  }), [acceptDate, disableCloseOnSelect, isMobileKeyboardViewOpen, draftState.draft]);\n  const handleInputChange = React.useCallback((date, keyboardInputValue) => {\n    const cleanDate = valueManager.valueReducer ? valueManager.valueReducer(utils, lastValidDateValue, date) : date;\n    onChange(cleanDate, keyboardInputValue);\n  }, [onChange, valueManager, lastValidDateValue, utils]);\n  const inputProps = React.useMemo(() => ({\n    onChange: handleInputChange,\n    open: isOpen,\n    rawValue: value,\n    openPicker: () => setIsOpen(true)\n  }), [handleInputChange, isOpen, value, setIsOpen]);\n  const pickerState = {\n    pickerProps,\n    inputProps,\n    wrapperProps\n  };\n  React.useDebugValue(pickerState, () => ({\n    MuiPickerState: {\n      pickerDraft: draftState,\n      other: pickerState\n    }\n  }));\n  return pickerState;\n};"]},"metadata":{},"sourceType":"module"}