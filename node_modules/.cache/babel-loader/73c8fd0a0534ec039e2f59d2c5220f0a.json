{"ast":null,"code":"import _objectSpread from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/david/Desktop/mydev/Church-Management/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{url}from\"../../Constants\";import{AlertMessage}from\"../Support/AlertMessage\";import Newstudententry from\"./newstudententry.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Inputstudentattendance=function Inputstudentattendance(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),studentnames=_useState2[0],setstudentnames=_useState2[1];var _useState3=useState({isOpen:false,message:'',variant:'filled',severity:'error'}),_useState4=_slicedToArray(_useState3,2),notify=_useState4[0],setNotify=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setdate=_useState6[1];var obj=[];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),studentattendance=_useState8[0],setstudentattendance=_useState8[1];var today=new Date();var dd=today.getDate();dd=dd<10?\"0\"+dd:dd;if(dd===\"00\"){dd=31;mm=mm-1;}var mm=today.getMonth()+1>12?today.getMonth():today.getMonth()+1;mm=mm<10?\"0\"+mm:mm;var yyyy=today.getFullYear();today=yyyy+\"-\"+mm+\"-\"+dd;var submit=function submit(){if(studentattendance){fetch(\"\".concat(url,\"/student_attendance.php\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({studentattendance:studentattendance,date:date})}).then(function(res){return res.json();}).then(function(result){setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:result}));window.location.reload();}).catch(function(error){console.error(error);});}else{setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:'Input All Required'}));}};useEffect(function(){fetch(\"\".concat(url,\"/getstudentname.php\")).then(function(res){return res.json();}).then(function(result){setstudentnames(result);},function(error){setNotify(_objectSpread(_objectSpread({},notify),{},{isOpen:true,message:error}));});},[]);var i=0;var count=studentnames.length;for(i=0;i<count;i++){if(studentnames[i]!==''){obj.push({\"name\":studentnames[i],\"present\":false});}}useEffect(function(){setstudentattendance(obj);},[studentnames]);return/*#__PURE__*/_jsxs(\"div\",{className:\"student-attendance-body\",children:[/*#__PURE__*/_jsx(AlertMessage,{notify:notify,setNotify:setNotify}),/*#__PURE__*/_jsx(\"input\",{className:\"inp\",type:\"date\",value:date,onChange:function onChange(event){setdate(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){return setdate(today);},children:\"Click if today\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date:\",date]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Present\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Absent\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:studentattendance.map(function(p){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){var temp=true;event.target.value==='true'?temp=true:temp=false;var present=temp;setstudentattendance(function(cp){return cp.map(function(x){return x.name===p.name?_objectSpread(_objectSpread({},x),{},{present:present}):x;});});},type:\"radio\",name:p.name,value:\"true\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-check present\"}),\" \"]})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){var temp=true;event.target.value==='false'?temp=false:temp=true;var present=temp;setstudentattendance(function(cp){return cp.map(function(x){return x.name===p.name?_objectSpread(_objectSpread({},x),{},{present:present}):x;});});},type:\"radio\",name:p.name,value:\"false\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"fas fa-times absent\"})]}),\" \"]})]},p.name);})}),/*#__PURE__*/_jsx(\"tfoot\",{})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){return submit();},children:\"Submit\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Newstudententry,{})})]});};export default Inputstudentattendance;","map":{"version":3,"sources":["/home/david/Desktop/mydev/Church-Management/src/views/Components/Sub Components/Inputstudentattendance.js"],"names":["React","useEffect","useState","url","AlertMessage","Newstudententry","Inputstudentattendance","studentnames","setstudentnames","isOpen","message","variant","severity","notify","setNotify","date","setdate","obj","studentattendance","setstudentattendance","today","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","submit","fetch","method","headers","body","JSON","stringify","then","res","json","result","window","location","reload","catch","error","console","i","count","length","push","event","target","value","map","p","name","temp","present","cp","x"],"mappings":"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","sourcesContent":["\nimport React, { useEffect, useState } from \"react\";\nimport { url } from \"../../Constants\";\nimport { AlertMessage } from \"../Support/AlertMessage\";\nimport Newstudententry from \"./newstudententry.js\";\n\nconst Inputstudentattendance = () => {\n  const [studentnames, setstudentnames] = useState([]);\n  const [notify, setNotify] = useState({ isOpen: false, message: '', variant: 'filled', severity: 'error' });\n  const [date, setdate] = useState();\n\n\n  const obj = [];\n  const [studentattendance, setstudentattendance] = useState([]);\n\n  let today = new Date();\n\n  let dd = today.getDate();\n  dd = dd < 10 ? \"0\" + dd : dd;\n  if (dd === \"00\") {\n    dd = 31;\n    mm = mm - 1;\n  }\n\n  let mm = (today.getMonth() + 1) > 12 ? today.getMonth() : today.getMonth() + 1;\n  mm = mm < 10 ? \"0\" + mm : mm;\n  let yyyy = today.getFullYear();\n\n  today = yyyy + \"-\" + mm + \"-\" + dd;\n\n  const submit = () => {\n    if (studentattendance) {\n      fetch(`${url}/student_attendance.php`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n\n        },\n        body: JSON.stringify({\n          studentattendance: studentattendance,\n          date: date\n\n        })\n      })\n        .then(res => res.json())\n        .then((result) => {\n          setNotify({\n            ...notify,\n            isOpen:true,\n            message:result\n          })\n          window.location.reload();\n        }).catch((error) => {\n          console.error(error);\n        });\n\n    }\n\n\n    else {\n     setNotify({\n       ...notify,\n       isOpen:true,\n       message:'Input All Required'\n     })\n    }\n  }\n\n\n  useEffect(() => {\n    fetch(`${url}/getstudentname.php`)\n      .then(res => res.json())\n      .then(\n        (result) => {\n\n          setstudentnames(result);\n        },\n        (error) => {\n          setNotify({\n            ...notify,\n            isOpen:true,\n            message:error\n          })\n        }\n      )\n  }, [])\n\n\n\n\n\n\n  let i = 0;\n  const count = studentnames.length;\n\n  for (i = 0; i < count; i++) {\n    if (studentnames[i] !== '') {\n      obj.push({ \"name\": studentnames[i], \"present\": false });\n    }\n  }\n\n  useEffect(() => {\n\n\n    setstudentattendance(obj);\n\n  }, [studentnames]);\n\n\n\n\n  return (\n    <div className=\"student-attendance-body\">\n      <AlertMessage\n        notify={notify}\n        setNotify={setNotify}\n      />\n      <input className=\"inp\" type=\"date\" value={date} onChange={(event) => {\n        setdate(event.target.value)\n      }} /><button className=\"btn\" onClick={() => setdate(today)} >Click if today</button>\n      <p>Date:{date}</p>\n      <table>\n        <thead>\n          <tr><th>Name</th>\n            <th>Present</th>\n            <th>Absent</th></tr>\n        </thead>\n        <tbody>\n          {studentattendance.map((p) => {\n            return (\n              <tr key={p.name} >\n                <td>{p.name}</td>\n                <td ><label className=\"container\"><input\n\n                  onChange={\n                    (event) => {\n                      let temp = true;\n\n                      event.target.value === 'true' ? temp = true : temp = false;\n                      const present = temp;\n                      setstudentattendance((cp) => cp.map(x => x.name === p.name ? {\n                        ...x,\n                        present\n                      } : x))\n                    }} type=\"radio\" name={p.name} value=\"true\" /> <span className=\"fas fa-check present\"></span> </label></td>\n                <td ><label className=\"container\"><input\n                  onChange={\n                    (event) => {\n                      let temp = true;\n                      event.target.value === 'false' ? temp = false : temp = true;\n                      const present = temp;\n                      setstudentattendance((cp) => cp.map(x => x.name === p.name ? {\n                        ...x,\n                        present\n                      } : x))\n                    }}\n                  type=\"radio\" name={p.name} value=\"false\" /> <span className=\"fas fa-times absent\"></span></label> </td>\n              </tr>\n            )\n          })}</tbody>\n        <tfoot></tfoot>\n\n\n      </table>\n      <button className=\"btn\" onClick={() => submit()}>Submit</button>\n      <div>\n        <Newstudententry />\n\n      </div>\n\n    </div>\n  )\n}\n\nexport default Inputstudentattendance;"]},"metadata":{},"sourceType":"module"}